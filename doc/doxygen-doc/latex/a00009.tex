Like most libraries that mainly fill data structures, hwloc is not thread safe but rather reentrant: all state is held in a \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} instance without mutex protection. That means, for example, that two threads can safely operate on and modify two different \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} instances, but they should not simultaneously invoke functions that modify the {\itshape same\/} instance. Similarly, one thread should not modify a \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} instance while another thread is reading or traversing it. However, two threads can safely read or traverse the same \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} instance concurrently.

When running in multiprocessor environments, be aware that proper thread synchronization and/or memory coherency protection is needed to pass hwloc data (such as \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} pointers) from one processor to another (e.g., a mutex, semaphore, or a memory barrier). Note that this is not a hwloc-\/specific requirement, but it is worth mentioning.

For reference, \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} modification operations include (but may not be limited to):


\begin{DoxyDescription}
\item[Creation and destruction ]{\ttfamily \hyperlink{a00043_ga5c2d6f476af87005c7bd0811d4548b9f}{hwloc\_\-topology\_\-init()}, \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()}, \hyperlink{a00043_ga6040925d3ee4bbb2647f2a321aca5f4b}{hwloc\_\-topology\_\-destroy()}} (see \hyperlink{a00043}{Create and Destroy Topologies}) imply major modifications of the structure, including freeing some objects. No other thread cannot access the topology or any of its objects at the same time.

Also references to objects inside the topology are not valid anymore after these functions return. 


\item[Runtime topology modifications ]{\ttfamily hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-$\ast$} (see \hyperlink{a00045}{Tinker With Topologies.}) may modify the topology significantly by adding objects inside the tree, changing the topology depth, etc. {\ttfamily hwloc\_\-topology\_\-restrict} modifies the topology even more dramatically by removing some objects.

Although references to former objects {\itshape may\/} still be valid after insertion or restriction, it is strongly advised to not rely on any such guarantee and always re-\/consult the topology to reacquire new instances of objects. 


\item[Locating topologies  ]{\ttfamily hwloc\_\-topology\_\-ignore$\ast$}, {\ttfamily hwloc\_\-topology\_\-set$\ast$} (see \hyperlink{a00044}{Configure Topology Detection}) do not modify the topology directly, but they do modify internal structures describing the behavior of the next invocation of {\ttfamily \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()}}. Hence, all of these functions should not be used concurrently.

Note that these functions do not modify the current topology until it is actually reloaded; it is possible to use them while other threads are only read the current topology. 


\end{DoxyDescription}