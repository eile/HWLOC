\hypertarget{a00044}{
\section{Configure Topology Detection}
\label{a00044}\index{Configure Topology Detection@{Configure Topology Detection}}
}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{a00024}{hwloc\_\-topology\_\-discovery\_\-support}
\begin{DoxyCompactList}\small\item\em Flags describing actual discovery support for this topology. \item\end{DoxyCompactList}\item 
struct \hyperlink{a00023}{hwloc\_\-topology\_\-cpubind\_\-support}
\begin{DoxyCompactList}\small\item\em Flags describing actual PU binding support for this topology. \item\end{DoxyCompactList}\item 
struct \hyperlink{a00025}{hwloc\_\-topology\_\-membind\_\-support}
\begin{DoxyCompactList}\small\item\em Flags describing actual memory binding support for this topology. \item\end{DoxyCompactList}\item 
struct \hyperlink{a00026}{hwloc\_\-topology\_\-support}
\begin{DoxyCompactList}\small\item\em Set of flags describing actual support for this topology. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{a00044_gada025d3ec20b4b420f8038d23d6e7bde}{hwloc\_\-topology\_\-flags\_\-e} \{ \par
\hyperlink{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea129b4fea1300be22bbaf0bb0958994c8}{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-SYSTEM}, 
\hyperlink{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea6ecb6abc6a0bb75e81564f8bca85783b}{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM}, 
\hyperlink{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea46ae25e8896278840b1800ae9ce4de41}{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES} =  (1$<$$<$2), 
\hyperlink{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea426b18c349f15d7046bb391d96fa947c}{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-BRIDGES} =  (1$<$$<$3), 
\par
\hyperlink{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea4a41dc181649ef81c2dcd44a54e271b9}{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-IO} =  (1$<$$<$4), 
\hyperlink{a00044_ggada025d3ec20b4b420f8038d23d6e7bdeaae509a0bed4a7067e0116c75c661178d}{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-ICACHES} =  (1$<$$<$5)
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
 int \hyperlink{a00044_gaf2071c8621fddc53649c245d87835b47}{hwloc\_\-topology\_\-ignore\_\-type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_\-obj\_\-type\_\-t} type)
\item 
 int \hyperlink{a00044_ga6ddd4213d95bd1c30555b294a60efa6b}{hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_\-obj\_\-type\_\-t} type)
\item 
 int \hyperlink{a00044_gaec6fb00050f50cd41007f1ae580d2106}{hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology)
\item 
 int \hyperlink{a00044_ga6d11e53db143ac39c32cdb3912b71f99}{hwloc\_\-topology\_\-set\_\-flags} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, unsigned long flags)
\item 
 int \hyperlink{a00044_gae1100de0162b3c6a9db750ac14629c05}{hwloc\_\-topology\_\-set\_\-pid} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, hwloc\_\-pid\_\-t pid)
\item 
 int \hyperlink{a00044_ga2f6bfb6958d8b508ea1d7d5bb266432c}{hwloc\_\-topology\_\-set\_\-fsroot} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, const char $\ast$restrict fsroot\_\-path)
\item 
 int \hyperlink{a00044_ga2fcb52181b586c20f001b7a999550324}{hwloc\_\-topology\_\-set\_\-synthetic} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, const char $\ast$restrict description)
\item 
 int \hyperlink{a00044_ga93efcc8a962afe1ed23393700682173f}{hwloc\_\-topology\_\-set\_\-xml} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, const char $\ast$restrict xmlpath)
\item 
 int \hyperlink{a00044_gae7e4bade144652a2b48f5eaf0309b4ec}{hwloc\_\-topology\_\-set\_\-xmlbuffer} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, const char $\ast$restrict buffer, int size)
\item 
 int \hyperlink{a00044_ga12024fec46f9368fb8fc5c624089c5ec}{hwloc\_\-topology\_\-set\_\-custom} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology)
\item 
 int \hyperlink{a00044_gabda6afa67a495cd652f064ad51d3fe47}{hwloc\_\-topology\_\-set\_\-distance\_\-matrix} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_\-obj\_\-type\_\-t} type, unsigned nbobjs, unsigned $\ast$os\_\-index, float $\ast$distances)
\item 
 struct \hyperlink{a00026}{hwloc\_\-topology\_\-support} $\ast$ \hyperlink{a00044_gac2126e105f3ae708efca2e90d612625a}{hwloc\_\-topology\_\-get\_\-support} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
These functions can optionally be called between \hyperlink{a00043_ga5c2d6f476af87005c7bd0811d4548b9f}{hwloc\_\-topology\_\-init()} and \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()} to configure how the detection should be performed, e.g. to ignore some objects types, define a synthetic topology, etc.

If none of them is called, the default is to detect all the objects of the machine that the caller is allowed to access.

This default behavior may also be modified through environment variables if the application did not modify it already. Setting HWLOC\_\-XMLFILE in the environment enforces the discovery from a XML file as if \hyperlink{a00044_ga93efcc8a962afe1ed23393700682173f}{hwloc\_\-topology\_\-set\_\-xml()} had been called. HWLOC\_\-FSROOT switches to reading the topology from the specified Linux filesystem root as if \hyperlink{a00044_ga2f6bfb6958d8b508ea1d7d5bb266432c}{hwloc\_\-topology\_\-set\_\-fsroot()} had been called. Finally, HWLOC\_\-THISSYSTEM enforces the return value of \hyperlink{a00046_ga0d109e33fc7990f62f665d336e5e5111}{hwloc\_\-topology\_\-is\_\-thissystem()}. 

\subsection{Enumeration Type Documentation}
\hypertarget{a00044_gada025d3ec20b4b420f8038d23d6e7bde}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-flags\_\-e@{hwloc\_\-topology\_\-flags\_\-e}}
\index{hwloc\_\-topology\_\-flags\_\-e@{hwloc\_\-topology\_\-flags\_\-e}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-flags\_\-e}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf hwloc\_\-topology\_\-flags\_\-e}}}
\label{a00044_gada025d3ec20b4b420f8038d23d6e7bde}


Flags to be set onto a topology context before load. 

Flags should be given to \hyperlink{a00044_ga6d11e53db143ac39c32cdb3912b71f99}{hwloc\_\-topology\_\-set\_\-flags()}. \begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-SYSTEM@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-SYSTEM}!hwlocality\_\-configuration@{hwlocality\_\-configuration}}\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-SYSTEM@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-SYSTEM}}\item[{\em 
\hypertarget{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea129b4fea1300be22bbaf0bb0958994c8}{
HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-SYSTEM}
\label{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea129b4fea1300be22bbaf0bb0958994c8}
}]Detect the whole system, ignore reservations and offline settings. Gather all resources, even if some were disabled by the administrator. For instance, ignore Linux Cpusets and gather all processors and memory nodes, and ignore the fact that some resources may be offline. \index{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM}!hwlocality\_\-configuration@{hwlocality\_\-configuration}}\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM}}\item[{\em 
\hypertarget{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea6ecb6abc6a0bb75e81564f8bca85783b}{
HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM}
\label{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea6ecb6abc6a0bb75e81564f8bca85783b}
}]Assume that the selected backend provides the topology for the system on which we are running. This forces hwloc\_\-topology\_\-is\_\-thissystem to return 1, i.e. makes hwloc assume that the selected backend provides the topology for the system on which we are running, even if it is not the OS-\/specific backend but the XML backend for instance. This means making the binding functions actually call the OS-\/specific system calls and really do binding, while the XML backend would otherwise provide empty hooks just returning success.

Setting the environment variable HWLOC\_\-THISSYSTEM may also result in the same behavior.

This can be used for efficiency reasons to first detect the topology once, save it to an XML file, and quickly reload it later through the XML backend, but still having binding functions actually do bind. \index{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES}!hwlocality\_\-configuration@{hwlocality\_\-configuration}}\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES}}\item[{\em 
\hypertarget{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea46ae25e8896278840b1800ae9ce4de41}{
HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES}
\label{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea46ae25e8896278840b1800ae9ce4de41}
}]Detect PCI devices. By default, I/O devices are ignored. This flag enables I/O device detection using the libpci backend. Only the common PCI devices (GPUs, NICs, block devices, ...) and host bridges (objects that connect the host objects to an I/O subsystem) will be added to the topology. Uncommon devices and other bridges (such as PCI-\/to-\/PCI bridges) will be ignored. \index{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-BRIDGES@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-BRIDGES}!hwlocality\_\-configuration@{hwlocality\_\-configuration}}\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-BRIDGES@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-BRIDGES}}\item[{\em 
\hypertarget{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea426b18c349f15d7046bb391d96fa947c}{
HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-BRIDGES}
\label{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea426b18c349f15d7046bb391d96fa947c}
}]Detect PCI bridges. This flag should be combined with HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IO\_\-DEVICES to enable the detection of both common devices and of all useful bridges (bridges that have at least one device behind them). \index{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-IO@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-IO}!hwlocality\_\-configuration@{hwlocality\_\-configuration}}\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-IO@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-IO}}\item[{\em 
\hypertarget{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea4a41dc181649ef81c2dcd44a54e271b9}{
HWLOC\_\-TOPOLOGY\_\-FLAG\_\-WHOLE\_\-IO}
\label{a00044_ggada025d3ec20b4b420f8038d23d6e7bdea4a41dc181649ef81c2dcd44a54e271b9}
}]Detect the whole PCI hierarchy. This flag enables detection of all I/O devices (even the uncommon ones) and bridges (even those that have no device behind them) using the libpci backend. \index{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-ICACHES@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-ICACHES}!hwlocality\_\-configuration@{hwlocality\_\-configuration}}\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!HWLOC\_\-TOPOLOGY\_\-FLAG\_\-ICACHES@{HWLOC\_\-TOPOLOGY\_\-FLAG\_\-ICACHES}}\item[{\em 
\hypertarget{a00044_ggada025d3ec20b4b420f8038d23d6e7bdeaae509a0bed4a7067e0116c75c661178d}{
HWLOC\_\-TOPOLOGY\_\-FLAG\_\-ICACHES}
\label{a00044_ggada025d3ec20b4b420f8038d23d6e7bdeaae509a0bed4a7067e0116c75c661178d}
}]Detect instruction caches. This flag enables detection of Instruction caches, instead of only Data and Unified caches. \end{description}
\end{Desc}



\subsection{Function Documentation}
\hypertarget{a00044_gac2126e105f3ae708efca2e90d612625a}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-get\_\-support@{hwloc\_\-topology\_\-get\_\-support}}
\index{hwloc\_\-topology\_\-get\_\-support@{hwloc\_\-topology\_\-get\_\-support}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-get\_\-support}]{\setlength{\rightskip}{0pt plus 5cm} struct {\bf hwloc\_\-topology\_\-support}$\ast$ hwloc\_\-topology\_\-get\_\-support (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}read\mbox{]}}}}
\label{a00044_gac2126e105f3ae708efca2e90d612625a}


Retrieve the topology support. 

\hypertarget{a00044_gaec6fb00050f50cd41007f1ae580d2106}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure@{hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure}}
\index{hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure@{hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-ignore\_\-all\_\-keep\_\-structure (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology}
\end{DoxyParamCaption}
)}}
\label{a00044_gaec6fb00050f50cd41007f1ae580d2106}


Ignore all objects that do not bring any structure. 

Ignore all objects that do not bring any structure: Each ignored object should have a single children or be the only child of its parent. I/O objects may not be ignored, topology flags should be used to configure their discovery instead. \hypertarget{a00044_gaf2071c8621fddc53649c245d87835b47}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-ignore\_\-type@{hwloc\_\-topology\_\-ignore\_\-type}}
\index{hwloc\_\-topology\_\-ignore\_\-type@{hwloc\_\-topology\_\-ignore\_\-type}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-ignore\_\-type}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-ignore\_\-type (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{{\bf hwloc\_\-obj\_\-type\_\-t}}]{type}
\end{DoxyParamCaption}
)}}
\label{a00044_gaf2071c8621fddc53649c245d87835b47}


Ignore an object type. 

Ignore all objects from the given type. The bottom-\/level type HWLOC\_\-OBJ\_\-PU may not be ignored. The top-\/level object of the hierarchy will never be ignored, even if this function succeeds. I/O objects may not be ignored, topology flags should be used to configure their discovery instead. \hypertarget{a00044_ga6ddd4213d95bd1c30555b294a60efa6b}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure@{hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure}}
\index{hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure@{hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-ignore\_\-type\_\-keep\_\-structure (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{{\bf hwloc\_\-obj\_\-type\_\-t}}]{type}
\end{DoxyParamCaption}
)}}
\label{a00044_ga6ddd4213d95bd1c30555b294a60efa6b}


Ignore an object type if it does not bring any structure. 

Ignore all objects from the given type as long as they do not bring any structure: Each ignored object should have a single children or be the only child of its parent. The bottom-\/level type HWLOC\_\-OBJ\_\-PU may not be ignored. I/O objects may not be ignored, topology flags should be used to configure their discovery instead. \hypertarget{a00044_ga12024fec46f9368fb8fc5c624089c5ec}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-custom@{hwloc\_\-topology\_\-set\_\-custom}}
\index{hwloc\_\-topology\_\-set\_\-custom@{hwloc\_\-topology\_\-set\_\-custom}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-custom}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-custom (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology}
\end{DoxyParamCaption}
)}}
\label{a00044_ga12024fec46f9368fb8fc5c624089c5ec}


Prepare the topology for custom assembly. 

The topology then contains a single root object. It may then be built by inserting other topologies with \hyperlink{a00051_ga59ccf6a63cb23d63940e8b782059d9cb}{hwloc\_\-custom\_\-insert\_\-topology()} or single objects with \hyperlink{a00051_gac1037fe389bfa7c2bf0e3739b7e20844}{hwloc\_\-custom\_\-insert\_\-group\_\-object\_\-by\_\-parent()}. \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()} must be called to finalize the new topology as usual. \hypertarget{a00044_gabda6afa67a495cd652f064ad51d3fe47}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-distance\_\-matrix@{hwloc\_\-topology\_\-set\_\-distance\_\-matrix}}
\index{hwloc\_\-topology\_\-set\_\-distance\_\-matrix@{hwloc\_\-topology\_\-set\_\-distance\_\-matrix}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-distance\_\-matrix}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-distance\_\-matrix (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{{\bf hwloc\_\-obj\_\-type\_\-t}}]{type, }
\item[{unsigned}]{nbobjs, }
\item[{unsigned $\ast$}]{os\_\-index, }
\item[{float $\ast$}]{distances}
\end{DoxyParamCaption}
)}}
\label{a00044_gabda6afa67a495cd652f064ad51d3fe47}


Provide a distance matrix. 

Provide the matrix of distances between a set of objects of the given type. The set may or may not contain all the existing objects of this type. The objects are specified by their OS/physical index in the {\ttfamily os\_\-index} array. The {\ttfamily distances} matrix follows the same order. The distance from object i to object j in the i$\ast$nbobjs+j.

A single latency matrix may be defined for each type. If another distance matrix already exists for the given type, either because the user specified it or because the OS offers it, it will be replaced by the given one. If {\ttfamily nbobjs} is {\ttfamily 0}, {\ttfamily os\_\-index} is {\ttfamily NULL} and {\ttfamily distances} is {\ttfamily NULL}, the existing distance matrix for the given type is removed.

\begin{DoxyNote}{Note}
Distance matrices are ignored in multi-\/node topologies. 
\end{DoxyNote}
\hypertarget{a00044_ga6d11e53db143ac39c32cdb3912b71f99}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-flags@{hwloc\_\-topology\_\-set\_\-flags}}
\index{hwloc\_\-topology\_\-set\_\-flags@{hwloc\_\-topology\_\-set\_\-flags}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{unsigned long}]{flags}
\end{DoxyParamCaption}
)}}
\label{a00044_ga6d11e53db143ac39c32cdb3912b71f99}


Set OR'ed flags to non-\/yet-\/loaded topology. 

Set a OR'ed set of \hyperlink{a00044_gada025d3ec20b4b420f8038d23d6e7bde}{hwloc\_\-topology\_\-flags\_\-e} onto a topology that was not yet loaded. \hypertarget{a00044_ga2f6bfb6958d8b508ea1d7d5bb266432c}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-fsroot@{hwloc\_\-topology\_\-set\_\-fsroot}}
\index{hwloc\_\-topology\_\-set\_\-fsroot@{hwloc\_\-topology\_\-set\_\-fsroot}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-fsroot}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-fsroot (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{const char $\ast$restrict}]{fsroot\_\-path}
\end{DoxyParamCaption}
)}}
\label{a00044_ga2f6bfb6958d8b508ea1d7d5bb266432c}


Change the file-\/system root path when building the topology from sysfs/procfs. 

On Linux system, use sysfs and procfs files as if they were mounted on the given {\ttfamily fsroot\_\-path} instead of the main file-\/system root. Setting the environment variable HWLOC\_\-FSROOT may also result in this behavior. Not using the main file-\/system root causes \hyperlink{a00046_ga0d109e33fc7990f62f665d336e5e5111}{hwloc\_\-topology\_\-is\_\-thissystem()} to return 0.

Note that this function does not actually load topology information; it just tells hwloc where to load it from. You'll still need to invoke \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()} to actually load the topology information.

\begin{DoxyReturn}{Returns}
-\/1 with errno set to ENOSYS on non-\/Linux and on Linux systems that do not support it. 

-\/1 with the appropriate errno if {\ttfamily fsroot\_\-path} cannot be used.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
For convenience, this backend provides empty binding hooks which just return success. To have hwloc still actually call OS-\/specific hooks, the HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM has to be set to assert that the loaded file is really the underlying system.

The existing topology is cleared even on failure. 
\end{DoxyNote}
\hypertarget{a00044_gae1100de0162b3c6a9db750ac14629c05}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-pid@{hwloc\_\-topology\_\-set\_\-pid}}
\index{hwloc\_\-topology\_\-set\_\-pid@{hwloc\_\-topology\_\-set\_\-pid}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-pid}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-pid (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{hwloc\_\-pid\_\-t}]{pid}
\end{DoxyParamCaption}
)}}
\label{a00044_gae1100de0162b3c6a9db750ac14629c05}


Change which pid the topology is viewed from. 

On some systems, processes may have different views of the machine, for instance the set of allowed CPUs. By default, hwloc exposes the view from the current process. Calling \hyperlink{a00044_gae1100de0162b3c6a9db750ac14629c05}{hwloc\_\-topology\_\-set\_\-pid()} permits to make it expose the topology of the machine from the point of view of another process.

\begin{DoxyNote}{Note}
{\ttfamily hwloc\_\-pid\_\-t} is {\ttfamily pid\_\-t} on Unix platforms, and {\ttfamily HANDLE} on native Windows platforms.

-\/1 is returned and errno is set to ENOSYS on platforms that do not support this feature. 
\end{DoxyNote}
\hypertarget{a00044_ga2fcb52181b586c20f001b7a999550324}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-synthetic@{hwloc\_\-topology\_\-set\_\-synthetic}}
\index{hwloc\_\-topology\_\-set\_\-synthetic@{hwloc\_\-topology\_\-set\_\-synthetic}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-synthetic}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-synthetic (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{const char $\ast$restrict}]{description}
\end{DoxyParamCaption}
)}}
\label{a00044_ga2fcb52181b586c20f001b7a999550324}


Enable synthetic topology. 

Gather topology information from the given {\ttfamily description}, a space-\/separated string of numbers describing the arity of each level. Each number may be prefixed with a type and a colon to enforce the type of a level. If only some level types are enforced, hwloc will try to choose the other types according to usual topologies, but it may fail and you may have to specify more level types manually.

If {\ttfamily description} was properly parsed and describes a valid topology configuration, this function returns 0. Otherwise -\/1 is returned and errno is set to EINVAL.

Note that this function does not actually load topology information; it just tells hwloc where to load it from. You'll still need to invoke \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()} to actually load the topology information.

\begin{DoxyNote}{Note}
For convenience, this backend provides empty binding hooks which just return success.

The existing topology is cleared even on failure. 
\end{DoxyNote}
\hypertarget{a00044_ga93efcc8a962afe1ed23393700682173f}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-xml@{hwloc\_\-topology\_\-set\_\-xml}}
\index{hwloc\_\-topology\_\-set\_\-xml@{hwloc\_\-topology\_\-set\_\-xml}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-xml}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-xml (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{const char $\ast$restrict}]{xmlpath}
\end{DoxyParamCaption}
)}}
\label{a00044_ga93efcc8a962afe1ed23393700682173f}


Enable XML-\/file based topology. 

Gather topology information from the XML file given at {\ttfamily xmlpath}. Setting the environment variable HWLOC\_\-XMLFILE may also result in this behavior. This file may have been generated earlier with \hyperlink{a00045_ga45578d725c66865cfef31d0585dcff70}{hwloc\_\-topology\_\-export\_\-xml()} or lstopo file.xml.

Note that this function does not actually load topology information; it just tells hwloc where to load it from. You'll still need to invoke \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()} to actually load the topology information.

\begin{DoxyReturn}{Returns}
-\/1 with errno set to EINVAL on failure to read the XML file.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
For convenience, this backend provides empty binding hooks which just return success. To have hwloc still actually call OS-\/specific hooks, the HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM has to be set to assert that the loaded file is really the underlying system.

The existing topology is cleared even on failure. 
\end{DoxyNote}
\hypertarget{a00044_gae7e4bade144652a2b48f5eaf0309b4ec}{
\index{hwlocality\_\-configuration@{hwlocality\_\-configuration}!hwloc\_\-topology\_\-set\_\-xmlbuffer@{hwloc\_\-topology\_\-set\_\-xmlbuffer}}
\index{hwloc\_\-topology\_\-set\_\-xmlbuffer@{hwloc\_\-topology\_\-set\_\-xmlbuffer}!hwlocality_configuration@{hwlocality\_\-configuration}}
\subsubsection[{hwloc\_\-topology\_\-set\_\-xmlbuffer}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-set\_\-xmlbuffer (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{const char $\ast$restrict}]{buffer, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}
\label{a00044_gae7e4bade144652a2b48f5eaf0309b4ec}


Enable XML based topology using a memory buffer (instead of a file, as with \hyperlink{a00044_ga93efcc8a962afe1ed23393700682173f}{hwloc\_\-topology\_\-set\_\-xml()}). 

Gather topology information from the XML memory buffer given at {\ttfamily buffer} and of length {\ttfamily size}. This buffer may have been filled earlier with \hyperlink{a00045_ga739330e9402425315e44e5012631fb91}{hwloc\_\-topology\_\-export\_\-xmlbuffer()}.

Note that this function does not actually load topology information; it just tells hwloc where to load it from. You'll still need to invoke \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()} to actually load the topology information.

\begin{DoxyReturn}{Returns}
-\/1 with errno set to EINVAL on failure to read the XML buffer.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
For convenience, this backend provides empty binding hooks which just return success. To have hwloc still actually call OS-\/specific hooks, the HWLOC\_\-TOPOLOGY\_\-FLAG\_\-IS\_\-THISSYSTEM has to be set to assert that the loaded file is really the underlying system.

The existing topology is cleared even on failure. 
\end{DoxyNote}
