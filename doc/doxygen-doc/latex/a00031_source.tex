\hypertarget{a00031_source}{
\section{helper.h}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * Copyright © 2009 CNRS}
00003 \textcolor{comment}{ * Copyright © 2009-2011 inria.  All rights reserved.}
00004 \textcolor{comment}{ * Copyright © 2009-2012 Université Bordeaux 1}
00005 \textcolor{comment}{ * Copyright © 2009-2010 Cisco Systems, Inc.  All rights reserved.}
00006 \textcolor{comment}{ * Copyright © 2012 Blue Brain Project, EPFL. All rights reserved.}
00007 \textcolor{comment}{ * See COPYING in top-level directory.}
00008 \textcolor{comment}{ */}
00009 
00014 \textcolor{preprocessor}{#ifndef HWLOC\_HELPER\_H}
00015 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define HWLOC\_HELPER\_H}
00016 \textcolor{preprocessor}{}
00017 \textcolor{preprocessor}{#ifndef HWLOC\_H}
00018 \textcolor{preprocessor}{}\textcolor{preprocessor}{#error Please include the main hwloc.h instead}
00019 \textcolor{preprocessor}{}\textcolor{preprocessor}{#endif}
00020 \textcolor{preprocessor}{}
00021 \textcolor{preprocessor}{#include <stdlib.h>}
00022 \textcolor{preprocessor}{#include <errno.h>}
00023 
00024 
00025 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00026 \textcolor{preprocessor}{}\textcolor{keyword}{extern} \textcolor{stringliteral}{"C"} \{
00027 \textcolor{preprocessor}{#endif}
00028 \textcolor{preprocessor}{}
00029 
00048 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00049 \hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{hwloc_get_type_or_below_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) 
      \_\_hwloc\_attribute\_pure;
00050 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00051}{}\hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{00051} \hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{hwloc_get_type_or_below_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00052 \{
00053   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00054 
00055   \textcolor{keywordflow}{if} (depth != \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00056     \textcolor{keywordflow}{return} depth;
00057 
00058   \textcolor{comment}{/* find the highest existing level with type order >= */}
00059   \textcolor{keywordflow}{for}(depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC_OBJ_PU}); ; depth--)
00060     \textcolor{keywordflow}{if} (\hyperlink{a00041_gabd7da4f4ea12b420b8ecbde458b27805}{hwloc_compare_types}(\hyperlink{a00046_gadd4964764ae7e49231065d58a553fd31}{hwloc_get_depth_type}(topology, depth), type) < 0)
00061       \textcolor{keywordflow}{return} depth+1;
00062 
00063   \textcolor{comment}{/* Shouldn't ever happen, as there is always a SYSTEM level with lower order an
      d known depth.  */}
00064   \textcolor{comment}{/* abort(); */}
00065 \}
00066 
00076 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00077 \hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{hwloc_get_type_or_above_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) 
      \_\_hwloc\_attribute\_pure;
00078 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00079}{}\hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{00079} \hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{hwloc_get_type_or_above_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00080 \{
00081   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00082 
00083   \textcolor{keywordflow}{if} (depth != \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00084     \textcolor{keywordflow}{return} depth;
00085 
00086   \textcolor{comment}{/* find the lowest existing level with type order <= */}
00087   \textcolor{keywordflow}{for}(depth = 0; ; depth++)
00088     \textcolor{keywordflow}{if} (\hyperlink{a00041_gabd7da4f4ea12b420b8ecbde458b27805}{hwloc_compare_types}(\hyperlink{a00046_gadd4964764ae7e49231065d58a553fd31}{hwloc_get_depth_type}(topology, depth), type) > 0)
00089       \textcolor{keywordflow}{return} depth-1;
00090 
00091   \textcolor{comment}{/* Shouldn't ever happen, as there is always a PU level with higher order and k
      nown depth.  */}
00092   \textcolor{comment}{/* abort(); */}
00093 \}
00094 
00114 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00115 \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pure;
00116 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00117}{}\hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{00117} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00118 \{
00119   \textcolor{keywordflow}{return} \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, 0, 0);
00120 \}
00121 
00123 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00124 \hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{hwloc_get_ancestor_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00125 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00126}{}\hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{00126} \hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{hwloc_get_ancestor_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} obj)
00127 \{
00128   \hyperlink{a00016}{hwloc_obj_t} ancestor = obj;
00129   \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} < depth)
00130     \textcolor{keywordflow}{return} NULL;
00131   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > depth)
00132     ancestor = ancestor->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00133   \textcolor{keywordflow}{return} ancestor;
00134 \}
00135 
00137 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00138 \hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{hwloc_get_ancestor_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unuse
      d, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00139 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00140}{}\hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{00140} \hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{hwloc_get_ancestor_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unuse
      d, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} obj)
00141 \{
00142   \hyperlink{a00016}{hwloc_obj_t} ancestor = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00143   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} != type)
00144     ancestor = ancestor->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00145   \textcolor{keywordflow}{return} ancestor;
00146 \}
00147 
00152 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00153}{}\hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{00153} \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} depth, 
      \hyperlink{a00016}{hwloc_obj_t} prev)
00154 \{
00155   \textcolor{keywordflow}{if} (!prev)
00156     \textcolor{keywordflow}{return} \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00157   \textcolor{keywordflow}{if} (prev->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} != depth)
00158     \textcolor{keywordflow}{return} NULL;
00159   \textcolor{keywordflow}{return} prev->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00160 \}
00161 
00168 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00169}{}\hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{00169} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type,
00170                    \hyperlink{a00016}{hwloc_obj_t} prev)
00171 \{
00172   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00173   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00174     \textcolor{keywordflow}{return} NULL;
00175   \textcolor{keywordflow}{return} \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth} (topology, depth, prev);
00176 \}
00177 
00186 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00187 \hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{hwloc_get_pu_obj_by_os_index}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} os\_index) \_\_hwlo
      c\_attribute\_pure;
00188 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00189}{}\hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{00189} \hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{hwloc_get_pu_obj_by_os_index}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} os\_index)
00190 \{
00191   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
00192   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC_OBJ_PU}, obj)) != NULL)
      
00193     \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index} == os\_index)
00194       \textcolor{keywordflow}{return} obj;
00195   \textcolor{keywordflow}{return} NULL;
00196 \}
00197 
00202 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00203}{}\hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{00203} \hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{hwloc_get_next_child} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} parent, \hyperlink{a00016}{hwloc_obj_t} prev)
00204 \{
00205   \textcolor{keywordflow}{if} (!prev)
00206     \textcolor{keywordflow}{return} parent->\hyperlink{a00016_af51d08a0a79dba517c06c5afedc8d2dc}{first_child};
00207   \textcolor{keywordflow}{if} (prev->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent} != parent)
00208     \textcolor{keywordflow}{return} NULL;
00209   \textcolor{keywordflow}{return} prev->\hyperlink{a00016_a7f2343ed476fe4942e6fffd4cade1b40}{next_sibling};
00210 \}
00211 
00213 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00214 \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused
      , \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2) \_\_hwloc\_attribute\_pure;
00215 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00216}{}\hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{00216} \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused
      , \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2)
00217 \{
00218   \textcolor{comment}{/* the loop isn't so easy since intermediate ancestors may have}
00219 \textcolor{comment}{   * different depth, causing us to alternate between using obj1->parent}
00220 \textcolor{comment}{   * and obj2->parent. Also, even if at some point we find ancestors of}
00221 \textcolor{comment}{   * of the same depth, their ancestors may have different depth again.}
00222 \textcolor{comment}{   */}
00223   \textcolor{keywordflow}{while} (obj1 != obj2) \{
00224     \textcolor{keywordflow}{while} (obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth})
00225       obj1 = obj1->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00226     \textcolor{keywordflow}{while} (obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth})
00227       obj2 = obj2->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00228     \textcolor{keywordflow}{if} (obj1 != obj2 && obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} == obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
00229       obj1 = obj1->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00230       obj2 = obj2->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00231     \}
00232   \}
00233   \textcolor{keywordflow}{return} obj1;
00234 \}
00235 
00240 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00241 \hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{hwloc_obj_is_in_subtree} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} obj, \hyperlink{a00016}{hwloc_obj_t} subtree\_root) \_\_hwloc\_attribute\_pure;
00242 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00243}{}\hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{00243} \hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{hwloc_obj_is_in_subtree} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} obj, \hyperlink{a00016}{hwloc_obj_t} subtree\_root)
00244 \{
00245   \textcolor{keywordflow}{return} \hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, subtree\_root->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00246 \}
00247 
00267 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00268}{}\hyperlink{a00054_gabcd5fa81a95fa5335950cae092277d5b}{00268} \hyperlink{a00054_gabcd5fa81a95fa5335950cae092277d5b}{hwloc_get_first_largest_obj_inside_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set})
00269 \{
00270   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00271   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || !\hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00272     \textcolor{keywordflow}{return} NULL;
00273   \textcolor{keywordflow}{while} (!\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00274     \textcolor{comment}{/* while the object intersects without being included, look at its children *
      /}
00275     \hyperlink{a00016}{hwloc_obj_t} child = NULL;
00276     \textcolor{keywordflow}{while} ((child = \hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{hwloc_get_next_child}(topology, obj, child)) != NULL) \{
00277       \textcolor{keywordflow}{if} (child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00278         \textcolor{keywordflow}{break};
00279     \}
00280     \textcolor{keywordflow}{if} (!child)
00281       \textcolor{comment}{/* no child intersects, return their father */}
00282       \textcolor{keywordflow}{return} obj;
00283     \textcolor{comment}{/* found one intersecting child, look at its children */}
00284     obj = child;
00285   \}
00286   \textcolor{comment}{/* obj is included, return it */}
00287   \textcolor{keywordflow}{return} obj;
00288 \}
00289 
00297 HWLOC\_DECLSPEC \textcolor{keywordtype}{int} \hyperlink{a00054_gaab04c89623662e63a48ed2cd48eb601c}{hwloc_get_largest_objs_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topolog
      y, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00298                                                  \hyperlink{a00016}{hwloc_obj_t} * \_\_hwloc\_restrict o
      bjs, \textcolor{keywordtype}{int} max);
00299 
00309 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00310}{}\hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{00310} \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00311                                            \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} prev)
00312 \{
00313   \hyperlink{a00016}{hwloc_obj_t} next = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, prev);
00314   \textcolor{keywordflow}{if} (!next || !next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00315     \textcolor{keywordflow}{return} NULL;
00316   \textcolor{keywordflow}{while} (next && !\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00317     next = next->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00318   \textcolor{keywordflow}{return} next;
00319 \}
00320 
00330 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00331}{}\hyperlink{a00054_ga934e7ecd68b33403e0c0be779d9ed1e6}{00331} \hyperlink{a00054_ga934e7ecd68b33403e0c0be779d9ed1e6}{hwloc_get_next_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00332                                           \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} prev
      )
00333 \{
00334   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00335   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00336     \textcolor{keywordflow}{return} NULL;
00337   \textcolor{keywordflow}{return} \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, prev);
00338 \}
00339 
00345 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00346 \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00347                                       \textcolor{keywordtype}{unsigned} depth, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc\_attri
      bute\_pure;
00348 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00349}{}\hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{00349} \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00350                                       \textcolor{keywordtype}{unsigned} depth, \textcolor{keywordtype}{unsigned} idx)
00351 \{
00352   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00353   \textcolor{keywordtype}{unsigned} count = 0;
00354   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00355     \textcolor{keywordflow}{return} NULL;
00356   \textcolor{keywordflow}{while} (obj) \{
00357     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00358       \textcolor{keywordflow}{if} (count == idx)
00359         \textcolor{keywordflow}{return} obj;
00360       count++;
00361     \}
00362     obj = obj->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00363   \}
00364   \textcolor{keywordflow}{return} NULL;
00365 \}
00366 
00376 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00377 \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00378                                      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc
      \_attribute\_pure;
00379 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00380}{}\hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{00380} \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00381                                      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \textcolor{keywordtype}{unsigned} idx)
00382 \{
00383   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00384   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00385     \textcolor{keywordflow}{return} NULL;
00386   \textcolor{keywordflow}{return} \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, idx);
00387 \}
00388 
00394 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
00395 \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00396                                          \textcolor{keywordtype}{unsigned} depth) \_\_hwloc\_attribute\_pure;
00397 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
\hypertarget{a00031_source_l00398}{}\hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{00398} \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00399                                          \textcolor{keywordtype}{unsigned} depth)
00400 \{
00401   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00402   \textcolor{keywordtype}{unsigned} count = 0;
00403   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00404     \textcolor{keywordflow}{return} 0;
00405   \textcolor{keywordflow}{while} (obj) \{
00406     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00407       count++;
00408     obj = obj->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00409   \}
00410   \textcolor{keywordflow}{return} count;
00411 \}
00412 
00422 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00423 \hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{hwloc_get_nbobjs_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00424                                         \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) \_\_hwloc\_attribute\_
      pure;
00425 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00426}{}\hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{00426} \hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{hwloc_get_nbobjs_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00427                                         \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00428 \{
00429   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00430   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00431     \textcolor{keywordflow}{return} 0;
00432   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00433     \textcolor{keywordflow}{return} -1; \textcolor{comment}{/* FIXME: agregate nbobjs from different levels? */}
00434   \textcolor{keywordflow}{return} \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth);
00435 \}
00436 
00445 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00446 \hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{hwloc_get_obj_index_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_un
      used, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00447                                    \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00448 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00449}{}\hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{00449} \hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{hwloc_get_obj_index_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_un
      used, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00450                                    \hyperlink{a00016}{hwloc_obj_t} obj)
00451 \{
00452   \textcolor{keywordtype}{int} index = 0;
00453   \textcolor{keywordflow}{if} (!\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00454     \textcolor{keywordflow}{return} -1;
00455   \textcolor{comment}{/* count how many objects are inside the cpuset on the way from us to the begin
      ning of the level */}
00456   \textcolor{keywordflow}{while} ((obj = obj->\hyperlink{a00016_ac715989f55ff5a0eb6be2969ee477ec0}{prev_cousin}) != NULL)
00457     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00458       index++;
00459   \textcolor{keywordflow}{return} index;
00460 \}
00461 
00476 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00477 \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00478                                 \hyperlink{a00016}{hwloc_obj_t} parent) \_\_hwloc\_attribute\_pure;
00479 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00480}{}\hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{00480} \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00481                                 \hyperlink{a00016}{hwloc_obj_t} parent)
00482 \{
00483   \hyperlink{a00016}{hwloc_obj_t} child;
00484   \textcolor{keywordflow}{if} (!parent->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || \hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(\textcolor{keyword}{set}))
00485     \textcolor{keywordflow}{return} NULL;
00486   child = parent->\hyperlink{a00016_af51d08a0a79dba517c06c5afedc8d2dc}{first_child};
00487   \textcolor{keywordflow}{while} (child) \{
00488     \textcolor{keywordflow}{if} (child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(\textcolor{keyword}{set}, child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00489       \textcolor{keywordflow}{return} child;
00490     child = child->\hyperlink{a00016_a7f2343ed476fe4942e6fffd4cade1b40}{next_sibling};
00491   \}
00492   \textcolor{keywordflow}{return} NULL;
00493 \}
00494 
00502 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00503 \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{se
      t}) \_\_hwloc\_attribute\_pure;
00504 static \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00505}{}\hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{00505} \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} se
      t)
00506 \{
00507   \textcolor{keyword}{struct }\hyperlink{a00016}{hwloc_obj} *current = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00508   \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(\textcolor{keyword}{set}) || !current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || !\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(\textcolor{keyword}{se
      t}, current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00509     \textcolor{keywordflow}{return} NULL;
00510   \textcolor{keywordflow}{while} (1) \{
00511     \hyperlink{a00016}{hwloc_obj_t} child = \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset}(topology, \textcolor{keyword}{set}, current);
00512     \textcolor{keywordflow}{if} (!child)
00513       \textcolor{keywordflow}{return} current;
00514     current = child;
00515   \}
00516 \}
00517 
00518 
00537 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00538}{}\hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{00538} \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00539                                             \textcolor{keywordtype}{unsigned} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}, \hyperlink{a00016}{hwloc_obj_t} prev)
00540 \{
00541   \hyperlink{a00016}{hwloc_obj_t} next = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, prev);
00542   \textcolor{keywordflow}{if} (!next || !next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00543     \textcolor{keywordflow}{return} NULL;
00544   \textcolor{keywordflow}{while} (next && !\hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(\textcolor{keyword}{set}, next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00545     next = next->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00546   \textcolor{keywordflow}{return} next;
00547 \}
00548 
00564 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00565}{}\hyperlink{a00056_ga5915ea30f326676b3a4cfff371ce04d1}{00565} \hyperlink{a00056_ga5915ea30f326676b3a4cfff371ce04d1}{hwloc_get_next_obj_covering_cpuset_by_type}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00566                                            \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} \hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type}, \hyperlink{a00016}{hwloc_obj_t} pre
      v)
00567 \{
00568   \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00569   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00570     \textcolor{keywordflow}{return} NULL;
00571   \textcolor{keywordflow}{return} \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, prev);
      
00572 \}
00573 
00589 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00590 \hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{hwloc_get_cache_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} 
      \textcolor{keyword}{set}) \_\_hwloc\_attribute\_pure;
00591 static \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00592}{}\hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{00592} \hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{hwloc_get_cache_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} 
      set)
00593 \{
00594   \hyperlink{a00016}{hwloc_obj_t} current = \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset}(topology, \textcolor{keyword}{set});
00595   \textcolor{keywordflow}{while} (current) \{
00596     \textcolor{keywordflow}{if} (current->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a56ee0b7eca88f363b75b34fdde8c9ddc}{HWLOC_OBJ_CACHE})
00597       \textcolor{keywordflow}{return} current;
00598     current = current->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00599   \}
00600   \textcolor{keywordflow}{return} NULL;
00601 \}
00602 
00607 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00608 \hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{hwloc_get_shared_cache_covering_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_
      unused, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00609 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00610}{}\hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{00610} \hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{hwloc_get_shared_cache_covering_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_
      unused, \hyperlink{a00016}{hwloc_obj_t} obj)
00611 \{
00612   \hyperlink{a00016}{hwloc_obj_t} current = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00613   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00614     \textcolor{keywordflow}{return} NULL;
00615   \textcolor{keywordflow}{while} (current && current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
00616     \textcolor{keywordflow}{if} (!\hyperlink{a00065_ga4dd6a75ab63d33ef33bd626b0e489388}{hwloc_bitmap_isequal}(current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00617         && current->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a56ee0b7eca88f363b75b34fdde8c9ddc}{HWLOC_OBJ_CACHE})
00618       \textcolor{keywordflow}{return} current;
00619     current = current->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00620   \}
00621   \textcolor{keywordflow}{return} NULL;
00622 \}
00623 
00648 \textcolor{comment}{/* TODO: rather provide an iterator? Provide a way to know how much should be all
      ocated? By returning the total number of objects instead? */}
00649 HWLOC\_DECLSPEC \textcolor{keywordtype}{unsigned} \hyperlink{a00058_ga26c2ac4f25b1ed293249c88e232f1bea}{hwloc_get_closest_objs} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00016}{hwloc_obj_t} src, \hyperlink{a00016}{hwloc_obj_t} * \_\_hwloc\_restrict objs, \textcolor{keywordtype}{unsigned} max);
00650 
00663 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00664 \hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{hwloc_get_obj_below_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
00665                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00666                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type2, \textcolor{keywordtype}{unsigned} idx2) \_\_hwloc\_attri
      bute\_pure;
00667 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00668}{}\hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{00668} \hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{hwloc_get_obj_below_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
00669                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00670                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type2, \textcolor{keywordtype}{unsigned} idx2)
00671 \{
00672   \hyperlink{a00016}{hwloc_obj_t} obj;
00673   obj = \hyperlink{a00047_ga9be4a03488cdd0fb431e4aa1cbdea895}{hwloc_get_obj_by_type} (topology, type1, idx1);
00674   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00675     \textcolor{keywordflow}{return} NULL;
00676   \textcolor{keywordflow}{return} \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type}(topology, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, type2, idx2);
      
00677 \}
00678 
00697 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00698 \hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{hwloc_get_obj_below_array_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{int} nr, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} *typev, \textcolor{keywordtype}{unsigned} *idxv) \_\_hwloc\_attribute\_pure;
00699 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00700}{}\hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{00700} \hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{hwloc_get_obj_below_array_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{int} nr, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} *typev, \textcolor{keywordtype}{unsigned} *idxv)
00701 \{
00702   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00703   \textcolor{keywordtype}{int} i;
00704   \textcolor{keywordflow}{for}(i=0; i<nr; i++) \{
00705     \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00706       \textcolor{keywordflow}{return} NULL;
00707     obj = \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type}(topology, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, typev[i], id
      xv[i]);
00708   \}
00709   \textcolor{keywordflow}{return} obj;
00710 \}
00711 
00735 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
00736 \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} *root, \textcolor{keywordtype}{unsigned} n\_roots,
       \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until);
00737 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00738}{}\hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{00738} \hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{hwloc_distribute}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} root, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until)
00739 \{
00740   \textcolor{keywordtype}{unsigned} i;
00741   \textcolor{keywordflow}{if} (!root->\hyperlink{a00016_aac3f6da35c9b57599909a44ce2b716c1}{arity} || n == 1 || root->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} >= until) \{
00742     \textcolor{comment}{/* Got to the bottom, we can't split any more, put everything there.  */}
00743     \textcolor{keywordflow}{for} (i=0; i<n; i++)
00744       cpuset[i] = \hyperlink{a00065_gaaa4ed76211cd3694dfbea2109fc440be}{hwloc_bitmap_dup}(root->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00745     \textcolor{keywordflow}{return};
00746   \}
00747   \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(topology, root->\hyperlink{a00016_a04d05403da37bfe17cd63b7c7dd07b1f}{children}, root->\hyperlink{a00016_aac3f6da35c9b57599909a44ce2b716c1}{arity}, cpuset, n, until);
00748 \}
00749 
00757 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00758}{}\hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{00758} \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} *roots, \textcolor{keywordtype}{unsigned} n\_roots
      , \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until)
00759 \{
00760   \textcolor{keywordtype}{unsigned} i;
00761   \textcolor{keywordtype}{unsigned} tot\_weight;
00762   \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *cpusetp = \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00763 
00764   tot\_weight = 0;
00765   \textcolor{keywordflow}{for} (i = 0; i < n\_roots; i++)
00766     \textcolor{keywordflow}{if} (roots[i]->cpuset)
00767       tot\_weight += \hyperlink{a00065_ga12d520387be74f849f191d7a06ac325c}{hwloc_bitmap_weight}(roots[i]->cpuset);
00768 
00769   \textcolor{keywordflow}{for} (i = 0; i < n\_roots && tot\_weight; i++) \{
00770     \textcolor{comment}{/* Give to roots[i] a portion proportional to its weight */}
00771     \textcolor{keywordtype}{unsigned} weight = roots[i]->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} ? \hyperlink{a00065_ga12d520387be74f849f191d7a06ac325c}{hwloc_bitmap_weight}(roots[i]->cpuset) : 
      0;
00772     \textcolor{keywordtype}{unsigned} chunk = (n * weight + tot\_weight-1) / tot\_weight;
00773     \hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{hwloc_distribute}(topology, roots[i], cpusetp, chunk, until);
00774     cpusetp += chunk;
00775     tot\_weight -= weight;
00776     n -= chunk;
00777   \}
00778 \}
00779 
00786 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void} *
\hypertarget{a00031_source_l00787}{}\hyperlink{a00059_ga3e772fbc4de626ed80f13d332b7d4d03}{00787} \hyperlink{a00059_ga3e772fbc4de626ed80f13d332b7d4d03}{hwloc_alloc_membind_policy_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{size\_t} len, 
      \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset}, \hyperlink{a00050_gac9764f79505775d06407b40f5e4661e8}{hwloc_membind_policy_t} policy, \textcolor{keywordtype}{int} flags)
00788 \{
00789   \textcolor{keywordtype}{void} *p = \hyperlink{a00050_gaeaa00714a9c4319bda0a74ca6f8720e8}{hwloc_alloc_membind_nodeset}(topology, len, nodeset, policy, flags);
00790   \textcolor{keywordflow}{if} (p)
00791     \textcolor{keywordflow}{return} p;
00792   \hyperlink{a00050_ga747962cbb16fd12ad6d126011c734a27}{hwloc_set_membind_nodeset}(topology, nodeset, policy, flags);
00793   p = \hyperlink{a00050_gac5586e58cf25c3596b7d4aa31ce13259}{hwloc_alloc}(topology, len);
00794   \textcolor{keywordflow}{if} (p && policy != \hyperlink{a00050_ggac9764f79505775d06407b40f5e4661e8a979c7aa78dd32780858f30f47a72cca0}{HWLOC_MEMBIND_FIRSTTOUCH})
00795     \textcolor{comment}{/* Enforce the binding by touching the data */}
00796     memset(p, 0, len);
00797   \textcolor{keywordflow}{return} p;
00798 \}
00799 
00804 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void} *
\hypertarget{a00031_source_l00805}{}\hyperlink{a00059_ga6178c6a9ec1dd88ec9f6a9fcdcc7d634}{00805} \hyperlink{a00059_ga6178c6a9ec1dd88ec9f6a9fcdcc7d634}{hwloc_alloc_membind_policy}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{size\_t} len, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00050_gac9764f79505775d06407b40f5e4661e8}{hwloc_membind_policy_t} policy, \textcolor{keywordtype}{int} flags)
00806 \{
00807   \textcolor{keywordtype}{void} *p = \hyperlink{a00050_ga221a7edc5d436300374fa16463f607e5}{hwloc_alloc_membind}(topology, len, cpuset, policy, flags);
00808   \textcolor{keywordflow}{if} (p)
00809     \textcolor{keywordflow}{return} p;
00810   \hyperlink{a00050_ga8b6d1d90227aff8e44ef26bc1f8a8f95}{hwloc_set_membind}(topology, cpuset, policy, flags);
00811   p = \hyperlink{a00050_gac5586e58cf25c3596b7d4aa31ce13259}{hwloc_alloc}(topology, len);
00812   \textcolor{keywordflow}{if} (p && policy != \hyperlink{a00050_ggac9764f79505775d06407b40f5e4661e8a979c7aa78dd32780858f30f47a72cca0}{HWLOC_MEMBIND_FIRSTTOUCH})
00813     \textcolor{comment}{/* Enforce the binding by touching the data */}
00814     memset(p, 0, len);
00815   \textcolor{keywordflow}{return} p;
00816 \}
00817 
00834 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00835 \hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{hwloc_topology_get_complete_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00836 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00837}{}\hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{00837} \hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{hwloc_topology_get_complete_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00838 \{
00839   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a91788a9da687beb7224cc1fd7b75208c}{complete_cpuset};
00840 \}
00841 
00852 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00853 \hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{hwloc_topology_get_topology_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00854 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00855}{}\hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{00855} \hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{hwloc_topology_get_topology_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00856 \{
00857   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00858 \}
00859 
00869 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00870 \hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{hwloc_topology_get_online_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pur
      e;
00871 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00872}{}\hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{00872} \hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{hwloc_topology_get_online_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00873 \{
00874   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a8842d56c2975380f327ea401c5f53564}{online_cpuset};
00875 \}
00876 
00886 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00887 \hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{hwloc_topology_get_allowed_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pu
      re;
00888 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00889}{}\hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{00889} \hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{hwloc_topology_get_allowed_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00890 \{
00891   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_afa3c59a6dd3da8ffa48710780a1bfb34}{allowed_cpuset};
00892 \}
00893 
00910 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00911 \hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{hwloc_topology_get_complete_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_
      pure;
00912 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00913}{}\hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{00913} \hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{hwloc_topology_get_complete_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00914 \{
00915   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_ac38c4012127525ef74c5615c526f4c2e}{complete_nodeset};
00916 \}
00917 
00928 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00929 \hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{hwloc_topology_get_topology_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_
      pure;
00930 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00931}{}\hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{00931} \hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{hwloc_topology_get_topology_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00932 \{
00933   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset};
00934 \}
00935 
00945 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00946 \hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{hwloc_topology_get_allowed_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00947 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00948}{}\hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{00948} \hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{hwloc_topology_get_allowed_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00949 \{
00950   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a19e3d0a5951a7510fc4fc4722a9bf531}{allowed_nodeset};
00951 \}
00952 
00983 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00984}{}\hyperlink{a00062_ga60ecc4ae480c28b5fbd34aca4fc37daa}{00984} \hyperlink{a00062_ga60ecc4ae480c28b5fbd34aca4fc37daa}{hwloc_cpuset_to_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, 
      \hyperlink{a00040_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
00985 \{
00986         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
00987         \hyperlink{a00016}{hwloc_obj_t} obj;
00988 
00989         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN}) \{
00990                  \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(cpuset))
00991                         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
00992                 \textcolor{keywordflow}{else}
00993                         \textcolor{comment}{/* Assume the whole system */}
00994                         \hyperlink{a00065_ga52456f7ef79d68e610cb65e3f7ffafad}{hwloc_bitmap_fill}(nodeset);
00995                 \textcolor{keywordflow}{return};
00996         \}
00997 
00998         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
00999         obj = NULL;
01000         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, cpuse
      t, depth, obj)) != NULL)
01001                 \hyperlink{a00065_ga497556af0cc34f109ae0277999c074d3}{hwloc_bitmap_set}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index});
01002 \}
01003 
01011 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01012}{}\hyperlink{a00062_ga9162785e39d7c697f76f99524c4a2fb4}{01012} \hyperlink{a00062_ga9162785e39d7c697f76f99524c4a2fb4}{hwloc_cpuset_to_nodeset_strict}(\textcolor{keyword}{struct} hwloc\_topology *topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00040_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01013 \{
01014         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01015         \hyperlink{a00016}{hwloc_obj_t} obj;
01016         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} )
01017                 \textcolor{keywordflow}{return};
01018         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
01019         obj = NULL;
01020         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, cpuse
      t, depth, obj)) != NULL)
01021                 \hyperlink{a00065_ga497556af0cc34f109ae0277999c074d3}{hwloc_bitmap_set}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index});
01022 \}
01023 
01032 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01033}{}\hyperlink{a00062_gaa677fd588304b5615de4ea78104adfb5}{01033} \hyperlink{a00062_gaa677fd588304b5615de4ea78104adfb5}{hwloc_cpuset_from_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, 
      \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01034 \{
01035         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01036         \hyperlink{a00016}{hwloc_obj_t} obj;
01037 
01038         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} ) \{
01039                 \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(nodeset))
01040                         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01041                 \textcolor{keywordflow}{else}
01042                         \textcolor{comment}{/* Assume the whole system */}
01043                         \hyperlink{a00065_ga52456f7ef79d68e610cb65e3f7ffafad}{hwloc_bitmap_fill}(cpuset);
01044                 \textcolor{keywordflow}{return};
01045         \}
01046 
01047         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01048         obj = NULL;
01049         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, obj)) != NULL)
       \{
01050                 \textcolor{keywordflow}{if} (\hyperlink{a00065_ga2583f44cbdb5fff2ea40efdcf3975d3f}{hwloc_bitmap_isset}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index}))
01051                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels
       always have a cpuset */}
01052                         \hyperlink{a00065_ga1ba1de709ee9a7cf5cc8ad2d9a1a81d4}{hwloc_bitmap_or}(cpuset, cpuset, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01053         \}
01054 \}
01055 
01063 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01064}{}\hyperlink{a00062_gaa7c3f39802b00a758c58e024a8119979}{01064} \hyperlink{a00062_gaa7c3f39802b00a758c58e024a8119979}{hwloc_cpuset_from_nodeset_strict}(\textcolor{keyword}{struct} hwloc\_topology *topology, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} 
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01065 \{
01066         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01067         \hyperlink{a00016}{hwloc_obj_t} obj;
01068         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} )
01069                 \textcolor{keywordflow}{return};
01070         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01071         obj = NULL;
01072         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, obj)) != NULL)
      
01073                 \textcolor{keywordflow}{if} (\hyperlink{a00065_ga2583f44cbdb5fff2ea40efdcf3975d3f}{hwloc_bitmap_isset}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index}))
01074                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels
       always have a cpuset */}
01075                         \hyperlink{a00065_ga1ba1de709ee9a7cf5cc8ad2d9a1a81d4}{hwloc_bitmap_or}(cpuset, cpuset, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01076 \}
01077 
01105 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01106}{}\hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{01106} \hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{hwloc_get_whole_distance_matrix_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} dept
      h)
01107 \{
01108   \hyperlink{a00016}{hwloc_obj_t} root = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
01109   \textcolor{keywordtype}{unsigned} i;
01110   \textcolor{keywordflow}{for}(i=0; i<root->\hyperlink{a00016_a8be6f63eca4da91000c832280db927b7}{distances_count}; i++)
01111     \textcolor{keywordflow}{if} (root->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a6fe066eaf62ee448aa05bab8e7217ff7}{relative_depth} == depth)
01112       \textcolor{keywordflow}{return} root->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i];
01113   \textcolor{keywordflow}{return} NULL;
01114 \}
01115 
01135 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01136}{}\hyperlink{a00063_ga9979237728f7a00a38836e15a8e8cd17}{01136} \hyperlink{a00063_ga9979237728f7a00a38836e15a8e8cd17}{hwloc_get_whole_distance_matrix_by_type}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
01137 \{
01138   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
01139   \textcolor{keywordflow}{if} (depth < 0)
01140     \textcolor{keywordflow}{return} NULL;
01141   \textcolor{keywordflow}{return} \hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{hwloc_get_whole_distance_matrix_by_depth}(topology, depth);
01142 \}
01143 
01157 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01158}{}\hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{01158} \hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{hwloc_get_distance_matrix_covering_obj_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01159                                                 \hyperlink{a00016}{hwloc_obj_t} obj, \textcolor{keywordtype}{unsigned} depth,
01160                                                 \textcolor{keywordtype}{unsigned} *firstp)
01161 \{
01162   \textcolor{keywordflow}{while} (obj && obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01163     \textcolor{keywordtype}{unsigned} i;
01164     \textcolor{keywordflow}{for}(i=0; i<obj->\hyperlink{a00016_a8be6f63eca4da91000c832280db927b7}{distances_count}; i++)
01165       \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a6fe066eaf62ee448aa05bab8e7217ff7}{relative_depth} == depth - obj->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
01166         \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs})
01167           \textcolor{keywordflow}{continue};
01168         *firstp = \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth}(topology, obj->
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, depth, NULL)->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index};
01169         \textcolor{keywordflow}{return} obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i];
01170       \}
01171     obj = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
01172   \}
01173   \textcolor{keywordflow}{return} NULL;
01174 \}
01175 
01187 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l01188}{}\hyperlink{a00063_ga9addde99e34b815df47625f1d6191839}{01188} \hyperlink{a00063_ga9addde99e34b815df47625f1d6191839}{hwloc_get_latency}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01189                    \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2,
01190                    \textcolor{keywordtype}{float} *\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency}, \textcolor{keywordtype}{float} *reverse\_latency)
01191 \{
01192   \hyperlink{a00016}{hwloc_obj_t} ancestor;
01193   \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} * distances;
01194   \textcolor{keywordtype}{unsigned} first\_logical ;
01195 
01196   \textcolor{keywordflow}{if} (obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} != obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
01197     errno = EINVAL;
01198     \textcolor{keywordflow}{return} -1;
01199   \}
01200 
01201   ancestor = \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj}(topology, obj1, obj2);
01202   distances = \hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{hwloc_get_distance_matrix_covering_obj_by_depth}(topology, ancestor,
       obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}, &first\_logical);
01203   \textcolor{keywordflow}{if} (distances && distances->\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency}) \{
01204     \textcolor{keyword}{const} \textcolor{keywordtype}{float} * latency\_matrix = distances->\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency};
01205     \textcolor{keywordtype}{unsigned} \hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs} = distances->\hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs};
01206     \textcolor{keywordtype}{unsigned} l1 = obj1->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index} - first\_logical;
01207     \textcolor{keywordtype}{unsigned} l2 = obj2->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index} - first\_logical;
01208     *latency = latency\_matrix[l1*nbobjs+l2];
01209     *reverse\_latency = latency\_matrix[l2*nbobjs+l1];
01210     \textcolor{keywordflow}{return} 0;
01211   \}
01212 
01213   errno = ENOSYS;
01214   \textcolor{keywordflow}{return} -1;
01215 \}
01216 
01231 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01232}{}\hyperlink{a00064_ga3603275746a8792e54415d79763aa9e9}{01232} \hyperlink{a00064_ga3603275746a8792e54415d79763aa9e9}{hwloc_get_non_io_ancestor_obj}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused,
      
01233                               \hyperlink{a00016}{hwloc_obj_t} ioobj)
01234 \{
01235   \hyperlink{a00016}{hwloc_obj_t} obj = ioobj;
01236   \textcolor{keywordflow}{while} (obj && !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01237     obj = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
01238   \}
01239   \textcolor{keywordflow}{return} obj;
01240 \}
01241 
01246 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01247}{}\hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{01247} \hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{hwloc_get_next_pcidev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01248 \{
01249   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a5d8117a54df1fbd3606ab19e42cb0ea9}{HWLOC_OBJ_PCI_DEVICE}, prev);
01250 \}
01251 
01255 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01256}{}\hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{01256} \hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{hwloc_get_pcidev_by_busid}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01257                           \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus, \textcolor{keywordtype}{unsigned} dev, \textcolor{keywordtype}{unsigned} f
      unc)
01258 \{
01259   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
01260   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{hwloc_get_next_pcidev}(topology, obj)) != NULL) \{
01261     \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a8fba44988deb98613c1505a4019a34dc}{domain} == domain
01262         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_aae99e035e8d1387d7b8768aaa8eceb0a}{bus} == bus
01263         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a3d70c84a12f7e93d14c8d47bf4fd9dc5}{dev} == dev
01264         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a695f32df53f4ef728670bfcf31b74e0f}{func} == func)
01265       \textcolor{keywordflow}{return} obj;
01266   \}
01267   \textcolor{keywordflow}{return} NULL;
01268 \}
01269 
01273 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01274}{}\hyperlink{a00064_ga9d5643f2e337fe1b98e7cce5c1ecb74e}{01274} \hyperlink{a00064_ga9d5643f2e337fe1b98e7cce5c1ecb74e}{hwloc_get_pcidev_by_busidstring}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *busid)
01275 \{
01276   \textcolor{keywordtype}{unsigned} domain = 0; \textcolor{comment}{/* default */}
01277   \textcolor{keywordtype}{unsigned} bus, dev, func;
01278 
01279   \textcolor{keywordflow}{if} (sscanf(busid, \textcolor{stringliteral}{"%x:%x.%x"}, &bus, &dev, &func) != 3
01280       && sscanf(busid, \textcolor{stringliteral}{"%x:%x:%x.%x"}, &domain, &bus, &dev, &func) != 4) \{
01281     errno = EINVAL;
01282     \textcolor{keywordflow}{return} NULL;
01283   \}
01284 
01285   \textcolor{keywordflow}{return} \hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{hwloc_get_pcidev_by_busid}(topology, domain, bus, dev, func);
01286 \}
01287 
01292 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01293}{}\hyperlink{a00064_ga73a5bc6265642e6001f7a10812ab886d}{01293} \hyperlink{a00064_ga73a5bc6265642e6001f7a10812ab886d}{hwloc_get_next_osdev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01294 \{
01295   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a51e7280240fd9f25589cbbe538bdb075}{HWLOC_OBJ_OS_DEVICE}, prev);
01296 \}
01297 
01302 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01303}{}\hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{01303} \hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{hwloc_get_next_bridge}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01304 \{
01305   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE}, prev);
01306 \}
01307 
01308 \textcolor{comment}{/* \(\backslash\)brief Checks whether a given bridge covers a given PCI bus.}
01309 \textcolor{comment}{ */}
01310 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l01311}{}\hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{01311} \hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{hwloc_bridge_covers_pcibus}(\hyperlink{a00016}{hwloc_obj_t} bridge,
01312                            \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01313 \{
01314   \textcolor{keywordflow}{return} bridge->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE}
01315     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_ac6a169b672d0e9f75756fd5665828b93}{downstream_type} == \hyperlink{a00041_gga48a4803c72574191d7ead1c62aaf9860a8f3b4cecf3dab6073d74696d10863c60}{HWLOC_OBJ_BRIDGE_PCI}
01316     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.domain == domain
01317     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.secondary\_bus <= bus
01318     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.subordinate\_bus >= bus;
01319 \}
01320 
01326 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01327}{}\hyperlink{a00064_ga81d4f68afbd68d94eb70d4f5c603eff5}{01327} \hyperlink{a00064_ga81d4f68afbd68d94eb70d4f5c603eff5}{hwloc_get_hostbridge_by_pcibus}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01328                                \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01329 \{
01330   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
01331   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{hwloc_get_next_bridge}(topology, obj)) != NULL) \{
01332     \textcolor{keywordflow}{if} (\hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{hwloc_bridge_covers_pcibus}(obj, domain, bus)) \{
01333       \textcolor{comment}{/* found bridge covering this pcibus, make sure it's a hostbridge */}
01334       assert(obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_a265dd2164aa2df4972e25a029da72125}{upstream_type} == \hyperlink{a00041_gga48a4803c72574191d7ead1c62aaf9860a2c7660f3864ad2810c1e72aad285e574}{HWLOC_OBJ_BRIDGE_HOST});
01335       assert(obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent}->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} != \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE});
01336       assert(obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent}->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01337       \textcolor{keywordflow}{return} obj;
01338     \}
01339   \}
01340   \textcolor{keywordflow}{return} NULL;
01341 \}
01342 
01350 HWLOC\_DECLSPEC \hyperlink{a00065_gaa3c2bf4c776d603dcebbb61b0c923d84}{hwloc_bitmap_t} \hyperlink{a00064_ga1219734ebc0451e3bc44e744664ebf7d}{get_pci_cpuset}(\textcolor{keyword}{const} \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keyword}{con
      st} \textcolor{keywordtype}{int} pci\_bus\_id);
01351 
01356 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
01357 \textcolor{preprocessor}{}\} \textcolor{comment}{/* extern "C" */}
01358 \textcolor{preprocessor}{#endif}
01359 \textcolor{preprocessor}{}
01360 
01361 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HWLOC\_HELPER\_H */}
\end{DoxyCode}
