\hypertarget{a00031_source}{
\section{helper.h}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * Copyright © 2009 CNRS}
00003 \textcolor{comment}{ * Copyright © 2009-2011 inria.  All rights reserved.}
00004 \textcolor{comment}{ * Copyright © 2009-2012 Université Bordeaux 1}
00005 \textcolor{comment}{ * Copyright © 2009-2010 Cisco Systems, Inc.  All rights reserved.}
00006 \textcolor{comment}{ * See COPYING in top-level directory.}
00007 \textcolor{comment}{ */}
00008 
00013 \textcolor{preprocessor}{#ifndef HWLOC\_HELPER\_H}
00014 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define HWLOC\_HELPER\_H}
00015 \textcolor{preprocessor}{}
00016 \textcolor{preprocessor}{#ifndef HWLOC\_H}
00017 \textcolor{preprocessor}{}\textcolor{preprocessor}{#error Please include the main hwloc.h instead}
00018 \textcolor{preprocessor}{}\textcolor{preprocessor}{#endif}
00019 \textcolor{preprocessor}{}
00020 \textcolor{preprocessor}{#include <stdlib.h>}
00021 \textcolor{preprocessor}{#include <errno.h>}
00022 
00023 
00024 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00025 \textcolor{preprocessor}{}\textcolor{keyword}{extern} \textcolor{stringliteral}{"C"} \{
00026 \textcolor{preprocessor}{#endif}
00027 \textcolor{preprocessor}{}
00028 
00047 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00048 \hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{hwloc_get_type_or_below_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) 
      \_\_hwloc\_attribute\_pure;
00049 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00050}{}\hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{00050} \hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{hwloc_get_type_or_below_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00051 \{
00052   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00053 
00054   \textcolor{keywordflow}{if} (depth != \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00055     \textcolor{keywordflow}{return} depth;
00056 
00057   \textcolor{comment}{/* find the highest existing level with type order >= */}
00058   \textcolor{keywordflow}{for}(depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC_OBJ_PU}); ; depth--)
00059     \textcolor{keywordflow}{if} (\hyperlink{a00041_gabd7da4f4ea12b420b8ecbde458b27805}{hwloc_compare_types}(\hyperlink{a00046_gadd4964764ae7e49231065d58a553fd31}{hwloc_get_depth_type}(topology, depth), type) < 0)
00060       \textcolor{keywordflow}{return} depth+1;
00061 
00062   \textcolor{comment}{/* Shouldn't ever happen, as there is always a SYSTEM level with lower order an
      d known depth.  */}
00063   \textcolor{comment}{/* abort(); */}
00064 \}
00065 
00075 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00076 \hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{hwloc_get_type_or_above_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) 
      \_\_hwloc\_attribute\_pure;
00077 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00078}{}\hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{00078} \hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{hwloc_get_type_or_above_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00079 \{
00080   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00081 
00082   \textcolor{keywordflow}{if} (depth != \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00083     \textcolor{keywordflow}{return} depth;
00084 
00085   \textcolor{comment}{/* find the lowest existing level with type order <= */}
00086   \textcolor{keywordflow}{for}(depth = 0; ; depth++)
00087     \textcolor{keywordflow}{if} (\hyperlink{a00041_gabd7da4f4ea12b420b8ecbde458b27805}{hwloc_compare_types}(\hyperlink{a00046_gadd4964764ae7e49231065d58a553fd31}{hwloc_get_depth_type}(topology, depth), type) > 0)
00088       \textcolor{keywordflow}{return} depth-1;
00089 
00090   \textcolor{comment}{/* Shouldn't ever happen, as there is always a PU level with higher order and k
      nown depth.  */}
00091   \textcolor{comment}{/* abort(); */}
00092 \}
00093 
00113 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00114 \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pure;
00115 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00116}{}\hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{00116} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00117 \{
00118   \textcolor{keywordflow}{return} \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, 0, 0);
00119 \}
00120 
00122 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00123 \hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{hwloc_get_ancestor_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00124 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00125}{}\hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{00125} \hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{hwloc_get_ancestor_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} obj)
00126 \{
00127   \hyperlink{a00016}{hwloc_obj_t} ancestor = obj;
00128   \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} < depth)
00129     \textcolor{keywordflow}{return} NULL;
00130   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > depth)
00131     ancestor = ancestor->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00132   \textcolor{keywordflow}{return} ancestor;
00133 \}
00134 
00136 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00137 \hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{hwloc_get_ancestor_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unuse
      d, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00138 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00139}{}\hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{00139} \hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{hwloc_get_ancestor_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unuse
      d, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} obj)
00140 \{
00141   \hyperlink{a00016}{hwloc_obj_t} ancestor = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00142   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} != type)
00143     ancestor = ancestor->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00144   \textcolor{keywordflow}{return} ancestor;
00145 \}
00146 
00151 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00152}{}\hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{00152} \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} depth, 
      \hyperlink{a00016}{hwloc_obj_t} prev)
00153 \{
00154   \textcolor{keywordflow}{if} (!prev)
00155     \textcolor{keywordflow}{return} \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00156   \textcolor{keywordflow}{if} (prev->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} != depth)
00157     \textcolor{keywordflow}{return} NULL;
00158   \textcolor{keywordflow}{return} prev->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00159 \}
00160 
00167 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00168}{}\hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{00168} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type,
00169                    \hyperlink{a00016}{hwloc_obj_t} prev)
00170 \{
00171   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00172   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00173     \textcolor{keywordflow}{return} NULL;
00174   \textcolor{keywordflow}{return} \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth} (topology, depth, prev);
00175 \}
00176 
00185 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00186 \hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{hwloc_get_pu_obj_by_os_index}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} os\_index) \_\_hwlo
      c\_attribute\_pure;
00187 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00188}{}\hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{00188} \hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{hwloc_get_pu_obj_by_os_index}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} os\_index)
00189 \{
00190   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
00191   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC_OBJ_PU}, obj)) != NULL)
      
00192     \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index} == os\_index)
00193       \textcolor{keywordflow}{return} obj;
00194   \textcolor{keywordflow}{return} NULL;
00195 \}
00196 
00201 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00202}{}\hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{00202} \hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{hwloc_get_next_child} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} parent, \hyperlink{a00016}{hwloc_obj_t} prev)
00203 \{
00204   \textcolor{keywordflow}{if} (!prev)
00205     \textcolor{keywordflow}{return} parent->\hyperlink{a00016_af51d08a0a79dba517c06c5afedc8d2dc}{first_child};
00206   \textcolor{keywordflow}{if} (prev->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent} != parent)
00207     \textcolor{keywordflow}{return} NULL;
00208   \textcolor{keywordflow}{return} prev->\hyperlink{a00016_a7f2343ed476fe4942e6fffd4cade1b40}{next_sibling};
00209 \}
00210 
00212 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00213 \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused
      , \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2) \_\_hwloc\_attribute\_pure;
00214 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00215}{}\hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{00215} \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused
      , \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2)
00216 \{
00217   \textcolor{comment}{/* the loop isn't so easy since intermediate ancestors may have}
00218 \textcolor{comment}{   * different depth, causing us to alternate between using obj1->parent}
00219 \textcolor{comment}{   * and obj2->parent. Also, even if at some point we find ancestors of}
00220 \textcolor{comment}{   * of the same depth, their ancestors may have different depth again.}
00221 \textcolor{comment}{   */}
00222   \textcolor{keywordflow}{while} (obj1 != obj2) \{
00223     \textcolor{keywordflow}{while} (obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth})
00224       obj1 = obj1->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00225     \textcolor{keywordflow}{while} (obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth})
00226       obj2 = obj2->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00227     \textcolor{keywordflow}{if} (obj1 != obj2 && obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} == obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
00228       obj1 = obj1->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00229       obj2 = obj2->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00230     \}
00231   \}
00232   \textcolor{keywordflow}{return} obj1;
00233 \}
00234 
00239 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00240 \hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{hwloc_obj_is_in_subtree} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} obj, \hyperlink{a00016}{hwloc_obj_t} subtree\_root) \_\_hwloc\_attribute\_pure;
00241 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00242}{}\hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{00242} \hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{hwloc_obj_is_in_subtree} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} obj, \hyperlink{a00016}{hwloc_obj_t} subtree\_root)
00243 \{
00244   \textcolor{keywordflow}{return} \hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, subtree\_root->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00245 \}
00246 
00266 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00267}{}\hyperlink{a00054_gabcd5fa81a95fa5335950cae092277d5b}{00267} \hyperlink{a00054_gabcd5fa81a95fa5335950cae092277d5b}{hwloc_get_first_largest_obj_inside_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set})
00268 \{
00269   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00270   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || !\hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00271     \textcolor{keywordflow}{return} NULL;
00272   \textcolor{keywordflow}{while} (!\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00273     \textcolor{comment}{/* while the object intersects without being included, look at its children *
      /}
00274     \hyperlink{a00016}{hwloc_obj_t} child = NULL;
00275     \textcolor{keywordflow}{while} ((child = \hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{hwloc_get_next_child}(topology, obj, child)) != NULL) \{
00276       \textcolor{keywordflow}{if} (child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00277         \textcolor{keywordflow}{break};
00278     \}
00279     \textcolor{keywordflow}{if} (!child)
00280       \textcolor{comment}{/* no child intersects, return their father */}
00281       \textcolor{keywordflow}{return} obj;
00282     \textcolor{comment}{/* found one intersecting child, look at its children */}
00283     obj = child;
00284   \}
00285   \textcolor{comment}{/* obj is included, return it */}
00286   \textcolor{keywordflow}{return} obj;
00287 \}
00288 
00296 HWLOC\_DECLSPEC \textcolor{keywordtype}{int} \hyperlink{a00054_gaab04c89623662e63a48ed2cd48eb601c}{hwloc_get_largest_objs_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topolog
      y, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00297                                                  \hyperlink{a00016}{hwloc_obj_t} * \_\_hwloc\_restrict o
      bjs, \textcolor{keywordtype}{int} max);
00298 
00308 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00309}{}\hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{00309} \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00310                                            \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} prev)
00311 \{
00312   \hyperlink{a00016}{hwloc_obj_t} next = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, prev);
00313   \textcolor{keywordflow}{if} (!next || !next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00314     \textcolor{keywordflow}{return} NULL;
00315   \textcolor{keywordflow}{while} (next && !\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00316     next = next->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00317   \textcolor{keywordflow}{return} next;
00318 \}
00319 
00329 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00330}{}\hyperlink{a00054_ga934e7ecd68b33403e0c0be779d9ed1e6}{00330} \hyperlink{a00054_ga934e7ecd68b33403e0c0be779d9ed1e6}{hwloc_get_next_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00331                                           \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} prev
      )
00332 \{
00333   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00334   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00335     \textcolor{keywordflow}{return} NULL;
00336   \textcolor{keywordflow}{return} \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, prev);
00337 \}
00338 
00344 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00345 \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00346                                       \textcolor{keywordtype}{unsigned} depth, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc\_attri
      bute\_pure;
00347 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00348}{}\hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{00348} \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00349                                       \textcolor{keywordtype}{unsigned} depth, \textcolor{keywordtype}{unsigned} idx)
00350 \{
00351   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00352   \textcolor{keywordtype}{unsigned} count = 0;
00353   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00354     \textcolor{keywordflow}{return} NULL;
00355   \textcolor{keywordflow}{while} (obj) \{
00356     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00357       \textcolor{keywordflow}{if} (count == idx)
00358         \textcolor{keywordflow}{return} obj;
00359       count++;
00360     \}
00361     obj = obj->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00362   \}
00363   \textcolor{keywordflow}{return} NULL;
00364 \}
00365 
00375 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00376 \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00377                                      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc
      \_attribute\_pure;
00378 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00379}{}\hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{00379} \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00380                                      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \textcolor{keywordtype}{unsigned} idx)
00381 \{
00382   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00383   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00384     \textcolor{keywordflow}{return} NULL;
00385   \textcolor{keywordflow}{return} \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, idx);
00386 \}
00387 
00393 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
00394 \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00395                                          \textcolor{keywordtype}{unsigned} depth) \_\_hwloc\_attribute\_pure;
00396 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
\hypertarget{a00031_source_l00397}{}\hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{00397} \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00398                                          \textcolor{keywordtype}{unsigned} depth)
00399 \{
00400   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00401   \textcolor{keywordtype}{unsigned} count = 0;
00402   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00403     \textcolor{keywordflow}{return} 0;
00404   \textcolor{keywordflow}{while} (obj) \{
00405     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00406       count++;
00407     obj = obj->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00408   \}
00409   \textcolor{keywordflow}{return} count;
00410 \}
00411 
00421 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00422 \hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{hwloc_get_nbobjs_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00423                                         \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) \_\_hwloc\_attribute\_
      pure;
00424 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00425}{}\hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{00425} \hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{hwloc_get_nbobjs_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00426                                         \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00427 \{
00428   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00429   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00430     \textcolor{keywordflow}{return} 0;
00431   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00432     \textcolor{keywordflow}{return} -1; \textcolor{comment}{/* FIXME: agregate nbobjs from different levels? */}
00433   \textcolor{keywordflow}{return} \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth);
00434 \}
00435 
00444 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00445 \hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{hwloc_get_obj_index_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_un
      used, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00446                                    \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00447 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00448}{}\hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{00448} \hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{hwloc_get_obj_index_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_un
      used, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00449                                    \hyperlink{a00016}{hwloc_obj_t} obj)
00450 \{
00451   \textcolor{keywordtype}{int} index = 0;
00452   \textcolor{keywordflow}{if} (!\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00453     \textcolor{keywordflow}{return} -1;
00454   \textcolor{comment}{/* count how many objects are inside the cpuset on the way from us to the begin
      ning of the level */}
00455   \textcolor{keywordflow}{while} ((obj = obj->\hyperlink{a00016_ac715989f55ff5a0eb6be2969ee477ec0}{prev_cousin}) != NULL)
00456     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00457       index++;
00458   \textcolor{keywordflow}{return} index;
00459 \}
00460 
00475 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00476 \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00477                                 \hyperlink{a00016}{hwloc_obj_t} parent) \_\_hwloc\_attribute\_pure;
00478 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00479}{}\hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{00479} \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00480                                 \hyperlink{a00016}{hwloc_obj_t} parent)
00481 \{
00482   \hyperlink{a00016}{hwloc_obj_t} child;
00483   \textcolor{keywordflow}{if} (!parent->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || \hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(\textcolor{keyword}{set}))
00484     \textcolor{keywordflow}{return} NULL;
00485   child = parent->\hyperlink{a00016_af51d08a0a79dba517c06c5afedc8d2dc}{first_child};
00486   \textcolor{keywordflow}{while} (child) \{
00487     \textcolor{keywordflow}{if} (child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(\textcolor{keyword}{set}, child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00488       \textcolor{keywordflow}{return} child;
00489     child = child->\hyperlink{a00016_a7f2343ed476fe4942e6fffd4cade1b40}{next_sibling};
00490   \}
00491   \textcolor{keywordflow}{return} NULL;
00492 \}
00493 
00501 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00502 \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{se
      t}) \_\_hwloc\_attribute\_pure;
00503 static \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00504}{}\hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{00504} \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} se
      t)
00505 \{
00506   \textcolor{keyword}{struct }\hyperlink{a00016}{hwloc_obj} *current = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00507   \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(\textcolor{keyword}{set}) || !current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || !\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(\textcolor{keyword}{se
      t}, current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00508     \textcolor{keywordflow}{return} NULL;
00509   \textcolor{keywordflow}{while} (1) \{
00510     \hyperlink{a00016}{hwloc_obj_t} child = \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset}(topology, \textcolor{keyword}{set}, current);
00511     \textcolor{keywordflow}{if} (!child)
00512       \textcolor{keywordflow}{return} current;
00513     current = child;
00514   \}
00515 \}
00516 
00517 
00536 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00537}{}\hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{00537} \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00538                                             \textcolor{keywordtype}{unsigned} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}, \hyperlink{a00016}{hwloc_obj_t} prev)
00539 \{
00540   \hyperlink{a00016}{hwloc_obj_t} next = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, prev);
00541   \textcolor{keywordflow}{if} (!next || !next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00542     \textcolor{keywordflow}{return} NULL;
00543   \textcolor{keywordflow}{while} (next && !\hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(\textcolor{keyword}{set}, next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00544     next = next->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00545   \textcolor{keywordflow}{return} next;
00546 \}
00547 
00563 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00564}{}\hyperlink{a00056_ga5915ea30f326676b3a4cfff371ce04d1}{00564} \hyperlink{a00056_ga5915ea30f326676b3a4cfff371ce04d1}{hwloc_get_next_obj_covering_cpuset_by_type}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00565                                            \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} \hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type}, \hyperlink{a00016}{hwloc_obj_t} pre
      v)
00566 \{
00567   \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00568   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00569     \textcolor{keywordflow}{return} NULL;
00570   \textcolor{keywordflow}{return} \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, prev);
      
00571 \}
00572 
00588 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00589 \hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{hwloc_get_cache_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} 
      \textcolor{keyword}{set}) \_\_hwloc\_attribute\_pure;
00590 static \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00591}{}\hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{00591} \hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{hwloc_get_cache_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} 
      set)
00592 \{
00593   \hyperlink{a00016}{hwloc_obj_t} current = \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset}(topology, \textcolor{keyword}{set});
00594   \textcolor{keywordflow}{while} (current) \{
00595     \textcolor{keywordflow}{if} (current->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a56ee0b7eca88f363b75b34fdde8c9ddc}{HWLOC_OBJ_CACHE})
00596       \textcolor{keywordflow}{return} current;
00597     current = current->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00598   \}
00599   \textcolor{keywordflow}{return} NULL;
00600 \}
00601 
00606 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00607 \hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{hwloc_get_shared_cache_covering_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_
      unused, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00608 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00609}{}\hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{00609} \hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{hwloc_get_shared_cache_covering_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_
      unused, \hyperlink{a00016}{hwloc_obj_t} obj)
00610 \{
00611   \hyperlink{a00016}{hwloc_obj_t} current = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00612   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00613     \textcolor{keywordflow}{return} NULL;
00614   \textcolor{keywordflow}{while} (current && current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
00615     \textcolor{keywordflow}{if} (!\hyperlink{a00065_ga4dd6a75ab63d33ef33bd626b0e489388}{hwloc_bitmap_isequal}(current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00616         && current->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a56ee0b7eca88f363b75b34fdde8c9ddc}{HWLOC_OBJ_CACHE})
00617       \textcolor{keywordflow}{return} current;
00618     current = current->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00619   \}
00620   \textcolor{keywordflow}{return} NULL;
00621 \}
00622 
00647 \textcolor{comment}{/* TODO: rather provide an iterator? Provide a way to know how much should be all
      ocated? By returning the total number of objects instead? */}
00648 HWLOC\_DECLSPEC \textcolor{keywordtype}{unsigned} \hyperlink{a00058_ga26c2ac4f25b1ed293249c88e232f1bea}{hwloc_get_closest_objs} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00016}{hwloc_obj_t} src, \hyperlink{a00016}{hwloc_obj_t} * \_\_hwloc\_restrict objs, \textcolor{keywordtype}{unsigned} max);
00649 
00662 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00663 \hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{hwloc_get_obj_below_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
00664                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00665                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type2, \textcolor{keywordtype}{unsigned} idx2) \_\_hwloc\_attri
      bute\_pure;
00666 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00667}{}\hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{00667} \hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{hwloc_get_obj_below_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
00668                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00669                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type2, \textcolor{keywordtype}{unsigned} idx2)
00670 \{
00671   \hyperlink{a00016}{hwloc_obj_t} obj;
00672   obj = \hyperlink{a00047_ga9be4a03488cdd0fb431e4aa1cbdea895}{hwloc_get_obj_by_type} (topology, type1, idx1);
00673   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00674     \textcolor{keywordflow}{return} NULL;
00675   \textcolor{keywordflow}{return} \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type}(topology, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, type2, idx2);
      
00676 \}
00677 
00696 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00697 \hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{hwloc_get_obj_below_array_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{int} nr, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} *typev, \textcolor{keywordtype}{unsigned} *idxv) \_\_hwloc\_attribute\_pure;
00698 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00699}{}\hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{00699} \hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{hwloc_get_obj_below_array_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{int} nr, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} *typev, \textcolor{keywordtype}{unsigned} *idxv)
00700 \{
00701   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00702   \textcolor{keywordtype}{int} i;
00703   \textcolor{keywordflow}{for}(i=0; i<nr; i++) \{
00704     \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00705       \textcolor{keywordflow}{return} NULL;
00706     obj = \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type}(topology, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, typev[i], id
      xv[i]);
00707   \}
00708   \textcolor{keywordflow}{return} obj;
00709 \}
00710 
00734 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
00735 \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} *root, \textcolor{keywordtype}{unsigned} n\_roots,
       \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until);
00736 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00737}{}\hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{00737} \hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{hwloc_distribute}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} root, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until)
00738 \{
00739   \textcolor{keywordtype}{unsigned} i;
00740   \textcolor{keywordflow}{if} (!root->\hyperlink{a00016_aac3f6da35c9b57599909a44ce2b716c1}{arity} || n == 1 || root->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} >= until) \{
00741     \textcolor{comment}{/* Got to the bottom, we can't split any more, put everything there.  */}
00742     \textcolor{keywordflow}{for} (i=0; i<n; i++)
00743       cpuset[i] = \hyperlink{a00065_gaaa4ed76211cd3694dfbea2109fc440be}{hwloc_bitmap_dup}(root->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00744     \textcolor{keywordflow}{return};
00745   \}
00746   \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(topology, root->\hyperlink{a00016_a04d05403da37bfe17cd63b7c7dd07b1f}{children}, root->\hyperlink{a00016_aac3f6da35c9b57599909a44ce2b716c1}{arity}, cpuset, n, until);
00747 \}
00748 
00756 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00757}{}\hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{00757} \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} *roots, \textcolor{keywordtype}{unsigned} n\_roots
      , \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until)
00758 \{
00759   \textcolor{keywordtype}{unsigned} i;
00760   \textcolor{keywordtype}{unsigned} tot\_weight;
00761   \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *cpusetp = \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00762 
00763   tot\_weight = 0;
00764   \textcolor{keywordflow}{for} (i = 0; i < n\_roots; i++)
00765     \textcolor{keywordflow}{if} (roots[i]->cpuset)
00766       tot\_weight += \hyperlink{a00065_ga12d520387be74f849f191d7a06ac325c}{hwloc_bitmap_weight}(roots[i]->cpuset);
00767 
00768   \textcolor{keywordflow}{for} (i = 0; i < n\_roots && tot\_weight; i++) \{
00769     \textcolor{comment}{/* Give to roots[i] a portion proportional to its weight */}
00770     \textcolor{keywordtype}{unsigned} weight = roots[i]->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} ? \hyperlink{a00065_ga12d520387be74f849f191d7a06ac325c}{hwloc_bitmap_weight}(roots[i]->cpuset) : 
      0;
00771     \textcolor{keywordtype}{unsigned} chunk = (n * weight + tot\_weight-1) / tot\_weight;
00772     \hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{hwloc_distribute}(topology, roots[i], cpusetp, chunk, until);
00773     cpusetp += chunk;
00774     tot\_weight -= weight;
00775     n -= chunk;
00776   \}
00777 \}
00778 
00785 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void} *
\hypertarget{a00031_source_l00786}{}\hyperlink{a00059_ga3e772fbc4de626ed80f13d332b7d4d03}{00786} \hyperlink{a00059_ga3e772fbc4de626ed80f13d332b7d4d03}{hwloc_alloc_membind_policy_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{size\_t} len, 
      \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset}, \hyperlink{a00050_gac9764f79505775d06407b40f5e4661e8}{hwloc_membind_policy_t} policy, \textcolor{keywordtype}{int} flags)
00787 \{
00788   \textcolor{keywordtype}{void} *p = \hyperlink{a00050_gaeaa00714a9c4319bda0a74ca6f8720e8}{hwloc_alloc_membind_nodeset}(topology, len, nodeset, policy, flags);
00789   \textcolor{keywordflow}{if} (p)
00790     \textcolor{keywordflow}{return} p;
00791   \hyperlink{a00050_ga747962cbb16fd12ad6d126011c734a27}{hwloc_set_membind_nodeset}(topology, nodeset, policy, flags);
00792   p = \hyperlink{a00050_gac5586e58cf25c3596b7d4aa31ce13259}{hwloc_alloc}(topology, len);
00793   \textcolor{keywordflow}{if} (p && policy != \hyperlink{a00050_ggac9764f79505775d06407b40f5e4661e8a979c7aa78dd32780858f30f47a72cca0}{HWLOC_MEMBIND_FIRSTTOUCH})
00794     \textcolor{comment}{/* Enforce the binding by touching the data */}
00795     memset(p, 0, len);
00796   \textcolor{keywordflow}{return} p;
00797 \}
00798 
00803 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void} *
\hypertarget{a00031_source_l00804}{}\hyperlink{a00059_ga6178c6a9ec1dd88ec9f6a9fcdcc7d634}{00804} \hyperlink{a00059_ga6178c6a9ec1dd88ec9f6a9fcdcc7d634}{hwloc_alloc_membind_policy}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{size\_t} len, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00050_gac9764f79505775d06407b40f5e4661e8}{hwloc_membind_policy_t} policy, \textcolor{keywordtype}{int} flags)
00805 \{
00806   \textcolor{keywordtype}{void} *p = \hyperlink{a00050_ga221a7edc5d436300374fa16463f607e5}{hwloc_alloc_membind}(topology, len, cpuset, policy, flags);
00807   \textcolor{keywordflow}{if} (p)
00808     \textcolor{keywordflow}{return} p;
00809   \hyperlink{a00050_ga8b6d1d90227aff8e44ef26bc1f8a8f95}{hwloc_set_membind}(topology, cpuset, policy, flags);
00810   p = \hyperlink{a00050_gac5586e58cf25c3596b7d4aa31ce13259}{hwloc_alloc}(topology, len);
00811   \textcolor{keywordflow}{if} (p && policy != \hyperlink{a00050_ggac9764f79505775d06407b40f5e4661e8a979c7aa78dd32780858f30f47a72cca0}{HWLOC_MEMBIND_FIRSTTOUCH})
00812     \textcolor{comment}{/* Enforce the binding by touching the data */}
00813     memset(p, 0, len);
00814   \textcolor{keywordflow}{return} p;
00815 \}
00816 
00833 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00834 \hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{hwloc_topology_get_complete_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00835 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00836}{}\hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{00836} \hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{hwloc_topology_get_complete_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00837 \{
00838   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a91788a9da687beb7224cc1fd7b75208c}{complete_cpuset};
00839 \}
00840 
00851 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00852 \hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{hwloc_topology_get_topology_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00853 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00854}{}\hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{00854} \hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{hwloc_topology_get_topology_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00855 \{
00856   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00857 \}
00858 
00868 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00869 \hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{hwloc_topology_get_online_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pur
      e;
00870 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00871}{}\hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{00871} \hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{hwloc_topology_get_online_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00872 \{
00873   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a8842d56c2975380f327ea401c5f53564}{online_cpuset};
00874 \}
00875 
00885 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00886 \hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{hwloc_topology_get_allowed_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pu
      re;
00887 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00888}{}\hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{00888} \hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{hwloc_topology_get_allowed_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00889 \{
00890   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_afa3c59a6dd3da8ffa48710780a1bfb34}{allowed_cpuset};
00891 \}
00892 
00909 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00910 \hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{hwloc_topology_get_complete_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_
      pure;
00911 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00912}{}\hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{00912} \hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{hwloc_topology_get_complete_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00913 \{
00914   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_ac38c4012127525ef74c5615c526f4c2e}{complete_nodeset};
00915 \}
00916 
00927 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00928 \hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{hwloc_topology_get_topology_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_
      pure;
00929 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00930}{}\hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{00930} \hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{hwloc_topology_get_topology_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00931 \{
00932   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset};
00933 \}
00934 
00944 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00945 \hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{hwloc_topology_get_allowed_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00946 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00947}{}\hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{00947} \hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{hwloc_topology_get_allowed_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00948 \{
00949   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a19e3d0a5951a7510fc4fc4722a9bf531}{allowed_nodeset};
00950 \}
00951 
00982 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00983}{}\hyperlink{a00062_ga60ecc4ae480c28b5fbd34aca4fc37daa}{00983} \hyperlink{a00062_ga60ecc4ae480c28b5fbd34aca4fc37daa}{hwloc_cpuset_to_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, 
      \hyperlink{a00040_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
00984 \{
00985         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
00986         \hyperlink{a00016}{hwloc_obj_t} obj;
00987 
00988         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN}) \{
00989                  \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(cpuset))
00990                         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
00991                 \textcolor{keywordflow}{else}
00992                         \textcolor{comment}{/* Assume the whole system */}
00993                         \hyperlink{a00065_ga52456f7ef79d68e610cb65e3f7ffafad}{hwloc_bitmap_fill}(nodeset);
00994                 \textcolor{keywordflow}{return};
00995         \}
00996 
00997         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
00998         obj = NULL;
00999         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, cpuse
      t, depth, obj)) != NULL)
01000                 \hyperlink{a00065_ga497556af0cc34f109ae0277999c074d3}{hwloc_bitmap_set}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index});
01001 \}
01002 
01010 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01011}{}\hyperlink{a00062_ga9162785e39d7c697f76f99524c4a2fb4}{01011} \hyperlink{a00062_ga9162785e39d7c697f76f99524c4a2fb4}{hwloc_cpuset_to_nodeset_strict}(\textcolor{keyword}{struct} hwloc\_topology *topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00040_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01012 \{
01013         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01014         \hyperlink{a00016}{hwloc_obj_t} obj;
01015         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} )
01016                 \textcolor{keywordflow}{return};
01017         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
01018         obj = NULL;
01019         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, cpuse
      t, depth, obj)) != NULL)
01020                 \hyperlink{a00065_ga497556af0cc34f109ae0277999c074d3}{hwloc_bitmap_set}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index});
01021 \}
01022 
01031 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01032}{}\hyperlink{a00062_gaa677fd588304b5615de4ea78104adfb5}{01032} \hyperlink{a00062_gaa677fd588304b5615de4ea78104adfb5}{hwloc_cpuset_from_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, 
      \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01033 \{
01034         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01035         \hyperlink{a00016}{hwloc_obj_t} obj;
01036 
01037         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} ) \{
01038                 \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(nodeset))
01039                         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01040                 \textcolor{keywordflow}{else}
01041                         \textcolor{comment}{/* Assume the whole system */}
01042                         \hyperlink{a00065_ga52456f7ef79d68e610cb65e3f7ffafad}{hwloc_bitmap_fill}(cpuset);
01043                 \textcolor{keywordflow}{return};
01044         \}
01045 
01046         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01047         obj = NULL;
01048         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, obj)) != NULL)
       \{
01049                 \textcolor{keywordflow}{if} (\hyperlink{a00065_ga2583f44cbdb5fff2ea40efdcf3975d3f}{hwloc_bitmap_isset}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index}))
01050                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels
       always have a cpuset */}
01051                         \hyperlink{a00065_ga1ba1de709ee9a7cf5cc8ad2d9a1a81d4}{hwloc_bitmap_or}(cpuset, cpuset, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01052         \}
01053 \}
01054 
01062 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01063}{}\hyperlink{a00062_gaa7c3f39802b00a758c58e024a8119979}{01063} \hyperlink{a00062_gaa7c3f39802b00a758c58e024a8119979}{hwloc_cpuset_from_nodeset_strict}(\textcolor{keyword}{struct} hwloc\_topology *topology, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} 
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01064 \{
01065         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01066         \hyperlink{a00016}{hwloc_obj_t} obj;
01067         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} )
01068                 \textcolor{keywordflow}{return};
01069         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01070         obj = NULL;
01071         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, obj)) != NULL)
      
01072                 \textcolor{keywordflow}{if} (\hyperlink{a00065_ga2583f44cbdb5fff2ea40efdcf3975d3f}{hwloc_bitmap_isset}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index}))
01073                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels
       always have a cpuset */}
01074                         \hyperlink{a00065_ga1ba1de709ee9a7cf5cc8ad2d9a1a81d4}{hwloc_bitmap_or}(cpuset, cpuset, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01075 \}
01076 
01104 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01105}{}\hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{01105} \hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{hwloc_get_whole_distance_matrix_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} dept
      h)
01106 \{
01107   \hyperlink{a00016}{hwloc_obj_t} root = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
01108   \textcolor{keywordtype}{unsigned} i;
01109   \textcolor{keywordflow}{for}(i=0; i<root->\hyperlink{a00016_a8be6f63eca4da91000c832280db927b7}{distances_count}; i++)
01110     \textcolor{keywordflow}{if} (root->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a6fe066eaf62ee448aa05bab8e7217ff7}{relative_depth} == depth)
01111       \textcolor{keywordflow}{return} root->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i];
01112   \textcolor{keywordflow}{return} NULL;
01113 \}
01114 
01134 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01135}{}\hyperlink{a00063_ga9979237728f7a00a38836e15a8e8cd17}{01135} \hyperlink{a00063_ga9979237728f7a00a38836e15a8e8cd17}{hwloc_get_whole_distance_matrix_by_type}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
01136 \{
01137   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
01138   \textcolor{keywordflow}{if} (depth < 0)
01139     \textcolor{keywordflow}{return} NULL;
01140   \textcolor{keywordflow}{return} \hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{hwloc_get_whole_distance_matrix_by_depth}(topology, depth);
01141 \}
01142 
01156 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01157}{}\hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{01157} \hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{hwloc_get_distance_matrix_covering_obj_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01158                                                 \hyperlink{a00016}{hwloc_obj_t} obj, \textcolor{keywordtype}{unsigned} depth,
01159                                                 \textcolor{keywordtype}{unsigned} *firstp)
01160 \{
01161   \textcolor{keywordflow}{while} (obj && obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01162     \textcolor{keywordtype}{unsigned} i;
01163     \textcolor{keywordflow}{for}(i=0; i<obj->\hyperlink{a00016_a8be6f63eca4da91000c832280db927b7}{distances_count}; i++)
01164       \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a6fe066eaf62ee448aa05bab8e7217ff7}{relative_depth} == depth - obj->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
01165         \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs})
01166           \textcolor{keywordflow}{continue};
01167         *firstp = \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth}(topology, obj->
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, depth, NULL)->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index};
01168         \textcolor{keywordflow}{return} obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i];
01169       \}
01170     obj = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
01171   \}
01172   \textcolor{keywordflow}{return} NULL;
01173 \}
01174 
01186 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l01187}{}\hyperlink{a00063_ga9addde99e34b815df47625f1d6191839}{01187} \hyperlink{a00063_ga9addde99e34b815df47625f1d6191839}{hwloc_get_latency}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01188                    \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2,
01189                    \textcolor{keywordtype}{float} *\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency}, \textcolor{keywordtype}{float} *reverse\_latency)
01190 \{
01191   \hyperlink{a00016}{hwloc_obj_t} ancestor;
01192   \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} * distances;
01193   \textcolor{keywordtype}{unsigned} first\_logical ;
01194 
01195   \textcolor{keywordflow}{if} (obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} != obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
01196     errno = EINVAL;
01197     \textcolor{keywordflow}{return} -1;
01198   \}
01199 
01200   ancestor = \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj}(topology, obj1, obj2);
01201   distances = \hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{hwloc_get_distance_matrix_covering_obj_by_depth}(topology, ancestor,
       obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}, &first\_logical);
01202   \textcolor{keywordflow}{if} (distances && distances->\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency}) \{
01203     \textcolor{keyword}{const} \textcolor{keywordtype}{float} * latency\_matrix = distances->\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency};
01204     \textcolor{keywordtype}{unsigned} \hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs} = distances->\hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs};
01205     \textcolor{keywordtype}{unsigned} l1 = obj1->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index} - first\_logical;
01206     \textcolor{keywordtype}{unsigned} l2 = obj2->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index} - first\_logical;
01207     *latency = latency\_matrix[l1*nbobjs+l2];
01208     *reverse\_latency = latency\_matrix[l2*nbobjs+l1];
01209     \textcolor{keywordflow}{return} 0;
01210   \}
01211 
01212   errno = ENOSYS;
01213   \textcolor{keywordflow}{return} -1;
01214 \}
01215 
01230 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01231}{}\hyperlink{a00064_ga3603275746a8792e54415d79763aa9e9}{01231} \hyperlink{a00064_ga3603275746a8792e54415d79763aa9e9}{hwloc_get_non_io_ancestor_obj}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused,
      
01232                               \hyperlink{a00016}{hwloc_obj_t} ioobj)
01233 \{
01234   \hyperlink{a00016}{hwloc_obj_t} obj = ioobj;
01235   \textcolor{keywordflow}{while} (obj && !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01236     obj = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
01237   \}
01238   \textcolor{keywordflow}{return} obj;
01239 \}
01240 
01245 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01246}{}\hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{01246} \hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{hwloc_get_next_pcidev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01247 \{
01248   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a5d8117a54df1fbd3606ab19e42cb0ea9}{HWLOC_OBJ_PCI_DEVICE}, prev);
01249 \}
01250 
01254 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01255}{}\hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{01255} \hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{hwloc_get_pcidev_by_busid}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01256                           \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus, \textcolor{keywordtype}{unsigned} dev, \textcolor{keywordtype}{unsigned} f
      unc)
01257 \{
01258   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
01259   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{hwloc_get_next_pcidev}(topology, obj)) != NULL) \{
01260     \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a8fba44988deb98613c1505a4019a34dc}{domain} == domain
01261         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_aae99e035e8d1387d7b8768aaa8eceb0a}{bus} == bus
01262         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a3d70c84a12f7e93d14c8d47bf4fd9dc5}{dev} == dev
01263         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a695f32df53f4ef728670bfcf31b74e0f}{func} == func)
01264       \textcolor{keywordflow}{return} obj;
01265   \}
01266   \textcolor{keywordflow}{return} NULL;
01267 \}
01268 
01272 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01273}{}\hyperlink{a00064_ga9d5643f2e337fe1b98e7cce5c1ecb74e}{01273} \hyperlink{a00064_ga9d5643f2e337fe1b98e7cce5c1ecb74e}{hwloc_get_pcidev_by_busidstring}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *busid)
01274 \{
01275   \textcolor{keywordtype}{unsigned} domain = 0; \textcolor{comment}{/* default */}
01276   \textcolor{keywordtype}{unsigned} bus, dev, func;
01277 
01278   \textcolor{keywordflow}{if} (sscanf(busid, \textcolor{stringliteral}{"%x:%x.%x"}, &bus, &dev, &func) != 3
01279       && sscanf(busid, \textcolor{stringliteral}{"%x:%x:%x.%x"}, &domain, &bus, &dev, &func) != 4) \{
01280     errno = EINVAL;
01281     \textcolor{keywordflow}{return} NULL;
01282   \}
01283 
01284   \textcolor{keywordflow}{return} \hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{hwloc_get_pcidev_by_busid}(topology, domain, bus, dev, func);
01285 \}
01286 
01291 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01292}{}\hyperlink{a00064_ga73a5bc6265642e6001f7a10812ab886d}{01292} \hyperlink{a00064_ga73a5bc6265642e6001f7a10812ab886d}{hwloc_get_next_osdev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01293 \{
01294   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a51e7280240fd9f25589cbbe538bdb075}{HWLOC_OBJ_OS_DEVICE}, prev);
01295 \}
01296 
01301 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01302}{}\hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{01302} \hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{hwloc_get_next_bridge}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01303 \{
01304   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE}, prev);
01305 \}
01306 
01307 \textcolor{comment}{/* \(\backslash\)brief Checks whether a given bridge covers a given PCI bus.}
01308 \textcolor{comment}{ */}
01309 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l01310}{}\hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{01310} \hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{hwloc_bridge_covers_pcibus}(\hyperlink{a00016}{hwloc_obj_t} bridge,
01311                            \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01312 \{
01313   \textcolor{keywordflow}{return} bridge->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE}
01314     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_ac6a169b672d0e9f75756fd5665828b93}{downstream_type} == \hyperlink{a00041_gga48a4803c72574191d7ead1c62aaf9860a8f3b4cecf3dab6073d74696d10863c60}{HWLOC_OBJ_BRIDGE_PCI}
01315     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.domain == domain
01316     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.secondary\_bus <= bus
01317     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.subordinate\_bus >= bus;
01318 \}
01319 
01325 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01326}{}\hyperlink{a00064_ga81d4f68afbd68d94eb70d4f5c603eff5}{01326} \hyperlink{a00064_ga81d4f68afbd68d94eb70d4f5c603eff5}{hwloc_get_hostbridge_by_pcibus}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01327                                \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01328 \{
01329   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
01330   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{hwloc_get_next_bridge}(topology, obj)) != NULL) \{
01331     \textcolor{keywordflow}{if} (\hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{hwloc_bridge_covers_pcibus}(obj, domain, bus)) \{
01332       \textcolor{comment}{/* found bridge covering this pcibus, make sure it's a hostbridge */}
01333       assert(obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_a265dd2164aa2df4972e25a029da72125}{upstream_type} == \hyperlink{a00041_gga48a4803c72574191d7ead1c62aaf9860a2c7660f3864ad2810c1e72aad285e574}{HWLOC_OBJ_BRIDGE_HOST});
01334       assert(obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent}->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} != \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE});
01335       assert(obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent}->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01336       \textcolor{keywordflow}{return} obj;
01337     \}
01338   \}
01339   \textcolor{keywordflow}{return} NULL;
01340 \}
01341 
01349 HWLOC\_DECLSPEC \hyperlink{a00065_gaa3c2bf4c776d603dcebbb61b0c923d84}{hwloc_bitmap_t} \hyperlink{a00064_ga1219734ebc0451e3bc44e744664ebf7d}{get_pci_cpuset}(\textcolor{keyword}{const} \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keyword}{con
      st} \textcolor{keywordtype}{int} pci\_bus\_id);
01350 
01355 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
01356 \textcolor{preprocessor}{}\} \textcolor{comment}{/* extern "C" */}
01357 \textcolor{preprocessor}{#endif}
01358 \textcolor{preprocessor}{}
01359 
01360 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HWLOC\_HELPER\_H */}
\end{DoxyCode}
