\hypertarget{a00031_source}{
\section{helper.h}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * Copyright © 2009 CNRS}
00003 \textcolor{comment}{ * Copyright © 2009-2011 inria.  All rights reserved.}
00004 \textcolor{comment}{ * Copyright © 2009-2012 Université Bordeaux 1}
00005 \textcolor{comment}{ * Copyright © 2009-2010 Cisco Systems, Inc.  All rights reserved.}
00006 \textcolor{comment}{ * Copyright © 2012 Blue Brain Project, EPFL. All rights reserved.}
00007 \textcolor{comment}{ * See COPYING in top-level directory.}
00008 \textcolor{comment}{ */}
00009 
00014 \textcolor{preprocessor}{#ifndef HWLOC\_HELPER\_H}
00015 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define HWLOC\_HELPER\_H}
00016 \textcolor{preprocessor}{}
00017 \textcolor{preprocessor}{#ifndef HWLOC\_H}
00018 \textcolor{preprocessor}{}\textcolor{preprocessor}{#error Please include the main hwloc.h instead}
00019 \textcolor{preprocessor}{}\textcolor{preprocessor}{#endif}
00020 \textcolor{preprocessor}{}
00021 \textcolor{preprocessor}{#include <stdlib.h>}
00022 \textcolor{preprocessor}{#include <errno.h>}
00023 
00024 \textcolor{preprocessor}{#ifdef HWLOC\_HAVE\_GL}
00025 \textcolor{preprocessor}{}\textcolor{preprocessor}{#include <hwloc/gl.h>}
00026 \textcolor{preprocessor}{#endif}
00027 \textcolor{preprocessor}{}
00028 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00029 \textcolor{preprocessor}{}\textcolor{keyword}{extern} \textcolor{stringliteral}{"C"} \{
00030 \textcolor{preprocessor}{#endif}
00031 \textcolor{preprocessor}{}
00032 
00051 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00052 \hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{hwloc_get_type_or_below_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) 
      \_\_hwloc\_attribute\_pure;
00053 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00054}{}\hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{00054} \hyperlink{a00052_ga081be77905201e9f42318e9974456b45}{hwloc_get_type_or_below_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00055 \{
00056   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00057 
00058   \textcolor{keywordflow}{if} (depth != \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00059     \textcolor{keywordflow}{return} depth;
00060 
00061   \textcolor{comment}{/* find the highest existing level with type order >= */}
00062   \textcolor{keywordflow}{for}(depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC_OBJ_PU}); ; depth--)
00063     \textcolor{keywordflow}{if} (\hyperlink{a00041_gabd7da4f4ea12b420b8ecbde458b27805}{hwloc_compare_types}(\hyperlink{a00046_gadd4964764ae7e49231065d58a553fd31}{hwloc_get_depth_type}(topology, depth), type) < 0)
00064       \textcolor{keywordflow}{return} depth+1;
00065 
00066   \textcolor{comment}{/* Shouldn't ever happen, as there is always a SYSTEM level with lower order an
      d known depth.  */}
00067   \textcolor{comment}{/* abort(); */}
00068 \}
00069 
00079 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00080 \hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{hwloc_get_type_or_above_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) 
      \_\_hwloc\_attribute\_pure;
00081 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00082}{}\hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{00082} \hyperlink{a00052_ga62a3f401854c209605c90079700f4bc5}{hwloc_get_type_or_above_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00083 \{
00084   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00085 
00086   \textcolor{keywordflow}{if} (depth != \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00087     \textcolor{keywordflow}{return} depth;
00088 
00089   \textcolor{comment}{/* find the lowest existing level with type order <= */}
00090   \textcolor{keywordflow}{for}(depth = 0; ; depth++)
00091     \textcolor{keywordflow}{if} (\hyperlink{a00041_gabd7da4f4ea12b420b8ecbde458b27805}{hwloc_compare_types}(\hyperlink{a00046_gadd4964764ae7e49231065d58a553fd31}{hwloc_get_depth_type}(topology, depth), type) > 0)
00092       \textcolor{keywordflow}{return} depth-1;
00093 
00094   \textcolor{comment}{/* Shouldn't ever happen, as there is always a PU level with higher order and k
      nown depth.  */}
00095   \textcolor{comment}{/* abort(); */}
00096 \}
00097 
00117 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00118 \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pure;
00119 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00120}{}\hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{00120} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00121 \{
00122   \textcolor{keywordflow}{return} \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, 0, 0);
00123 \}
00124 
00126 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00127 \hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{hwloc_get_ancestor_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00128 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00129}{}\hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{00129} \hyperlink{a00053_ga9b9d6af74eb0b78b1384aa66dd058ddc}{hwloc_get_ancestor_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} obj)
00130 \{
00131   \hyperlink{a00016}{hwloc_obj_t} ancestor = obj;
00132   \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} < depth)
00133     \textcolor{keywordflow}{return} NULL;
00134   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > depth)
00135     ancestor = ancestor->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00136   \textcolor{keywordflow}{return} ancestor;
00137 \}
00138 
00140 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00141 \hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{hwloc_get_ancestor_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unuse
      d, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00142 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00143}{}\hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{00143} \hyperlink{a00053_gac93e1a95a71add57ac841daef1b94e5e}{hwloc_get_ancestor_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unuse
      d, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} obj)
00144 \{
00145   \hyperlink{a00016}{hwloc_obj_t} ancestor = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00146   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} != type)
00147     ancestor = ancestor->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00148   \textcolor{keywordflow}{return} ancestor;
00149 \}
00150 
00155 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00156}{}\hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{00156} \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} depth, 
      \hyperlink{a00016}{hwloc_obj_t} prev)
00157 \{
00158   \textcolor{keywordflow}{if} (!prev)
00159     \textcolor{keywordflow}{return} \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00160   \textcolor{keywordflow}{if} (prev->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} != depth)
00161     \textcolor{keywordflow}{return} NULL;
00162   \textcolor{keywordflow}{return} prev->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00163 \}
00164 
00171 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00172}{}\hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{00172} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type,
00173                    \hyperlink{a00016}{hwloc_obj_t} prev)
00174 \{
00175   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00176   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00177     \textcolor{keywordflow}{return} NULL;
00178   \textcolor{keywordflow}{return} \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth} (topology, depth, prev);
00179 \}
00180 
00189 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00190 \hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{hwloc_get_pu_obj_by_os_index}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} os\_index) \_\_hwlo
      c\_attribute\_pure;
00191 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00192}{}\hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{00192} \hyperlink{a00053_ga0bc54225b65d557c70c7cb5dfb714de7}{hwloc_get_pu_obj_by_os_index}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} os\_index)
00193 \{
00194   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
00195   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC_OBJ_PU}, obj)) != NULL)
      
00196     \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index} == os\_index)
00197       \textcolor{keywordflow}{return} obj;
00198   \textcolor{keywordflow}{return} NULL;
00199 \}
00200 
00205 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00206}{}\hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{00206} \hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{hwloc_get_next_child} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} parent, \hyperlink{a00016}{hwloc_obj_t} prev)
00207 \{
00208   \textcolor{keywordflow}{if} (!prev)
00209     \textcolor{keywordflow}{return} parent->\hyperlink{a00016_af51d08a0a79dba517c06c5afedc8d2dc}{first_child};
00210   \textcolor{keywordflow}{if} (prev->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent} != parent)
00211     \textcolor{keywordflow}{return} NULL;
00212   \textcolor{keywordflow}{return} prev->\hyperlink{a00016_a7f2343ed476fe4942e6fffd4cade1b40}{next_sibling};
00213 \}
00214 
00216 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00217 \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused
      , \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2) \_\_hwloc\_attribute\_pure;
00218 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00219}{}\hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{00219} \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused
      , \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2)
00220 \{
00221   \textcolor{comment}{/* the loop isn't so easy since intermediate ancestors may have}
00222 \textcolor{comment}{   * different depth, causing us to alternate between using obj1->parent}
00223 \textcolor{comment}{   * and obj2->parent. Also, even if at some point we find ancestors of}
00224 \textcolor{comment}{   * of the same depth, their ancestors may have different depth again.}
00225 \textcolor{comment}{   */}
00226   \textcolor{keywordflow}{while} (obj1 != obj2) \{
00227     \textcolor{keywordflow}{while} (obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth})
00228       obj1 = obj1->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00229     \textcolor{keywordflow}{while} (obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} > obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth})
00230       obj2 = obj2->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00231     \textcolor{keywordflow}{if} (obj1 != obj2 && obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} == obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
00232       obj1 = obj1->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00233       obj2 = obj2->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00234     \}
00235   \}
00236   \textcolor{keywordflow}{return} obj1;
00237 \}
00238 
00243 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00244 \hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{hwloc_obj_is_in_subtree} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} obj, \hyperlink{a00016}{hwloc_obj_t} subtree\_root) \_\_hwloc\_attribute\_pure;
00245 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00246}{}\hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{00246} \hyperlink{a00053_ga08b5c1c1a95ed27a219c8af864690b3e}{hwloc_obj_is_in_subtree} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00016}{hwloc_obj_t} obj, \hyperlink{a00016}{hwloc_obj_t} subtree\_root)
00247 \{
00248   \textcolor{keywordflow}{return} \hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, subtree\_root->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00249 \}
00250 
00270 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00271}{}\hyperlink{a00054_gabcd5fa81a95fa5335950cae092277d5b}{00271} \hyperlink{a00054_gabcd5fa81a95fa5335950cae092277d5b}{hwloc_get_first_largest_obj_inside_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set})
00272 \{
00273   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00274   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || !\hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00275     \textcolor{keywordflow}{return} NULL;
00276   \textcolor{keywordflow}{while} (!\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00277     \textcolor{comment}{/* while the object intersects without being included, look at its children *
      /}
00278     \hyperlink{a00016}{hwloc_obj_t} child = NULL;
00279     \textcolor{keywordflow}{while} ((child = \hyperlink{a00053_gae5ef1af636849f77714e1584ba78cf9c}{hwloc_get_next_child}(topology, obj, child)) != NULL) \{
00280       \textcolor{keywordflow}{if} (child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00281         \textcolor{keywordflow}{break};
00282     \}
00283     \textcolor{keywordflow}{if} (!child)
00284       \textcolor{comment}{/* no child intersects, return their father */}
00285       \textcolor{keywordflow}{return} obj;
00286     \textcolor{comment}{/* found one intersecting child, look at its children */}
00287     obj = child;
00288   \}
00289   \textcolor{comment}{/* obj is included, return it */}
00290   \textcolor{keywordflow}{return} obj;
00291 \}
00292 
00300 HWLOC\_DECLSPEC \textcolor{keywordtype}{int} \hyperlink{a00054_gaab04c89623662e63a48ed2cd48eb601c}{hwloc_get_largest_objs_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topolog
      y, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00301                                                  \hyperlink{a00016}{hwloc_obj_t} * \_\_hwloc\_restrict o
      bjs, \textcolor{keywordtype}{int} max);
00302 
00312 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00313}{}\hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{00313} \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00314                                            \textcolor{keywordtype}{unsigned} depth, \hyperlink{a00016}{hwloc_obj_t} prev)
00315 \{
00316   \hyperlink{a00016}{hwloc_obj_t} next = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, prev);
00317   \textcolor{keywordflow}{if} (!next || !next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00318     \textcolor{keywordflow}{return} NULL;
00319   \textcolor{keywordflow}{while} (next && !\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00320     next = next->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00321   \textcolor{keywordflow}{return} next;
00322 \}
00323 
00333 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00334}{}\hyperlink{a00054_ga934e7ecd68b33403e0c0be779d9ed1e6}{00334} \hyperlink{a00054_ga934e7ecd68b33403e0c0be779d9ed1e6}{hwloc_get_next_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00335                                           \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \hyperlink{a00016}{hwloc_obj_t} prev
      )
00336 \{
00337   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00338   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00339     \textcolor{keywordflow}{return} NULL;
00340   \textcolor{keywordflow}{return} \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, prev);
00341 \}
00342 
00348 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00349 \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00350                                       \textcolor{keywordtype}{unsigned} depth, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc\_attri
      bute\_pure;
00351 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00352}{}\hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{00352} \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00353                                       \textcolor{keywordtype}{unsigned} depth, \textcolor{keywordtype}{unsigned} idx)
00354 \{
00355   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00356   \textcolor{keywordtype}{unsigned} count = 0;
00357   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00358     \textcolor{keywordflow}{return} NULL;
00359   \textcolor{keywordflow}{while} (obj) \{
00360     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00361       \textcolor{keywordflow}{if} (count == idx)
00362         \textcolor{keywordflow}{return} obj;
00363       count++;
00364     \}
00365     obj = obj->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00366   \}
00367   \textcolor{keywordflow}{return} NULL;
00368 \}
00369 
00379 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00380 \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00381                                      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc
      \_attribute\_pure;
00382 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00383}{}\hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{00383} \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00384                                      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type, \textcolor{keywordtype}{unsigned} idx)
00385 \{
00386   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00387   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00388     \textcolor{keywordflow}{return} NULL;
00389   \textcolor{keywordflow}{return} \hyperlink{a00054_ga57c8a0e227d1b16a31d19aaf755b42c0}{hwloc_get_obj_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, idx);
00390 \}
00391 
00397 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
00398 \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00399                                          \textcolor{keywordtype}{unsigned} depth) \_\_hwloc\_attribute\_pure;
00400 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
\hypertarget{a00031_source_l00401}{}\hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{00401} \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00402                                          \textcolor{keywordtype}{unsigned} depth)
00403 \{
00404   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00047_gaedd78240b0c1108355586a268ec5a697}{hwloc_get_obj_by_depth} (topology, depth, 0);
00405   \textcolor{keywordtype}{unsigned} count = 0;
00406   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00407     \textcolor{keywordflow}{return} 0;
00408   \textcolor{keywordflow}{while} (obj) \{
00409     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00410       count++;
00411     obj = obj->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00412   \}
00413   \textcolor{keywordflow}{return} count;
00414 \}
00415 
00425 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00426 \hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{hwloc_get_nbobjs_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00427                                         \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type) \_\_hwloc\_attribute\_
      pure;
00428 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00429}{}\hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{00429} \hyperlink{a00054_ga63481874c69ed257b1a0c03e7615ff97}{hwloc_get_nbobjs_inside_cpuset_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00430                                         \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
00431 \{
00432   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00433   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN})
00434     \textcolor{keywordflow}{return} 0;
00435   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00436     \textcolor{keywordflow}{return} -1; \textcolor{comment}{/* FIXME: agregate nbobjs from different levels? */}
00437   \textcolor{keywordflow}{return} \hyperlink{a00054_ga457604a2dedbf70ba3b480558666b56b}{hwloc_get_nbobjs_inside_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth);
00438 \}
00439 
00448 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00449 \hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{hwloc_get_obj_index_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_un
      used, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00450                                    \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00451 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l00452}{}\hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{00452} \hyperlink{a00054_ga7cdb6a4645e9b1ec80137e72d1736fdd}{hwloc_get_obj_index_inside_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_un
      used, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00453                                    \hyperlink{a00016}{hwloc_obj_t} obj)
00454 \{
00455   \textcolor{keywordtype}{int} index = 0;
00456   \textcolor{keywordflow}{if} (!\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00457     \textcolor{keywordflow}{return} -1;
00458   \textcolor{comment}{/* count how many objects are inside the cpuset on the way from us to the begin
      ning of the level */}
00459   \textcolor{keywordflow}{while} ((obj = obj->\hyperlink{a00016_ac715989f55ff5a0eb6be2969ee477ec0}{prev_cousin}) != NULL)
00460     \textcolor{keywordflow}{if} (\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00461       index++;
00462   \textcolor{keywordflow}{return} index;
00463 \}
00464 
00479 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00480 \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00481                                 \hyperlink{a00016}{hwloc_obj_t} parent) \_\_hwloc\_attribute\_pure;
00482 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00483}{}\hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{00483} \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unus
      ed, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00484                                 \hyperlink{a00016}{hwloc_obj_t} parent)
00485 \{
00486   \hyperlink{a00016}{hwloc_obj_t} child;
00487   \textcolor{keywordflow}{if} (!parent->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || \hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(\textcolor{keyword}{set}))
00488     \textcolor{keywordflow}{return} NULL;
00489   child = parent->\hyperlink{a00016_af51d08a0a79dba517c06c5afedc8d2dc}{first_child};
00490   \textcolor{keywordflow}{while} (child) \{
00491     \textcolor{keywordflow}{if} (child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(\textcolor{keyword}{set}, child->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00492       \textcolor{keywordflow}{return} child;
00493     child = child->\hyperlink{a00016_a7f2343ed476fe4942e6fffd4cade1b40}{next_sibling};
00494   \}
00495   \textcolor{keywordflow}{return} NULL;
00496 \}
00497 
00505 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00506 \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{se
      t}) \_\_hwloc\_attribute\_pure;
00507 static \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00508}{}\hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{00508} \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} se
      t)
00509 \{
00510   \textcolor{keyword}{struct }\hyperlink{a00016}{hwloc_obj} *current = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00511   \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(\textcolor{keyword}{set}) || !current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} || !\hyperlink{a00065_gaae29e14a926c198e8f91e6e4790621e7}{hwloc_bitmap_isincluded}(\textcolor{keyword}{se
      t}, current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00512     \textcolor{keywordflow}{return} NULL;
00513   \textcolor{keywordflow}{while} (1) \{
00514     \hyperlink{a00016}{hwloc_obj_t} child = \hyperlink{a00055_ga69a22cc76c88115aee7b7e6fc53fca7d}{hwloc_get_child_covering_cpuset}(topology, \textcolor{keyword}{set}, current);
00515     \textcolor{keywordflow}{if} (!child)
00516       \textcolor{keywordflow}{return} current;
00517     current = child;
00518   \}
00519 \}
00520 
00521 
00540 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00541}{}\hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{00541} \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00542                                             \textcolor{keywordtype}{unsigned} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}, \hyperlink{a00016}{hwloc_obj_t} prev)
00543 \{
00544   \hyperlink{a00016}{hwloc_obj_t} next = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, prev);
00545   \textcolor{keywordflow}{if} (!next || !next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00546     \textcolor{keywordflow}{return} NULL;
00547   \textcolor{keywordflow}{while} (next && !\hyperlink{a00065_ga575c27953709a8cb9a047aae65157526}{hwloc_bitmap_intersects}(\textcolor{keyword}{set}, next->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00548     next = next->\hyperlink{a00016_a85a788017457129589318b6c39451acf}{next_cousin};
00549   \textcolor{keywordflow}{return} next;
00550 \}
00551 
00567 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00568}{}\hyperlink{a00056_ga5915ea30f326676b3a4cfff371ce04d1}{00568} \hyperlink{a00056_ga5915ea30f326676b3a4cfff371ce04d1}{hwloc_get_next_obj_covering_cpuset_by_type}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \textcolor{keyword}{set},
00569                                            \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} \hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type}, \hyperlink{a00016}{hwloc_obj_t} pre
      v)
00570 \{
00571   \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
00572   \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} || depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC_TYPE_DEPTH_MULTIPLE})
00573     \textcolor{keywordflow}{return} NULL;
00574   \textcolor{keywordflow}{return} \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, \textcolor{keyword}{set}, depth, prev);
      
00575 \}
00576 
00592 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00593 \hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{hwloc_get_cache_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} 
      \textcolor{keyword}{set}) \_\_hwloc\_attribute\_pure;
00594 static \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00595}{}\hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{00595} \hyperlink{a00057_ga2f936fd9a9c62f6d9b9951de3062e889}{hwloc_get_cache_covering_cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} 
      set)
00596 \{
00597   \hyperlink{a00016}{hwloc_obj_t} current = \hyperlink{a00055_ga68300dd0ee9c36a7a90f275a59e9af28}{hwloc_get_obj_covering_cpuset}(topology, \textcolor{keyword}{set});
00598   \textcolor{keywordflow}{while} (current) \{
00599     \textcolor{keywordflow}{if} (current->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a56ee0b7eca88f363b75b34fdde8c9ddc}{HWLOC_OBJ_CACHE})
00600       \textcolor{keywordflow}{return} current;
00601     current = current->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00602   \}
00603   \textcolor{keywordflow}{return} NULL;
00604 \}
00605 
00610 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00611 \hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{hwloc_get_shared_cache_covering_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_
      unused, \hyperlink{a00016}{hwloc_obj_t} obj) \_\_hwloc\_attribute\_pure;
00612 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00613}{}\hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{00613} \hyperlink{a00057_ga000e08a1da039130daa072e77713bb43}{hwloc_get_shared_cache_covering_obj} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_
      unused, \hyperlink{a00016}{hwloc_obj_t} obj)
00614 \{
00615   \hyperlink{a00016}{hwloc_obj_t} current = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00616   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00617     \textcolor{keywordflow}{return} NULL;
00618   \textcolor{keywordflow}{while} (current && current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
00619     \textcolor{keywordflow}{if} (!\hyperlink{a00065_ga4dd6a75ab63d33ef33bd626b0e489388}{hwloc_bitmap_isequal}(current->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00620         && current->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a56ee0b7eca88f363b75b34fdde8c9ddc}{HWLOC_OBJ_CACHE})
00621       \textcolor{keywordflow}{return} current;
00622     current = current->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
00623   \}
00624   \textcolor{keywordflow}{return} NULL;
00625 \}
00626 
00651 \textcolor{comment}{/* TODO: rather provide an iterator? Provide a way to know how much should be all
      ocated? By returning the total number of objects instead? */}
00652 HWLOC\_DECLSPEC \textcolor{keywordtype}{unsigned} \hyperlink{a00058_ga26c2ac4f25b1ed293249c88e232f1bea}{hwloc_get_closest_objs} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00016}{hwloc_obj_t} src, \hyperlink{a00016}{hwloc_obj_t} * \_\_hwloc\_restrict objs, \textcolor{keywordtype}{unsigned} max);
00653 
00666 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00667 \hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{hwloc_get_obj_below_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
00668                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00669                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type2, \textcolor{keywordtype}{unsigned} idx2) \_\_hwloc\_attri
      bute\_pure;
00670 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00671}{}\hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{00671} \hyperlink{a00058_ga6c482c2097f01b1ff88598fec8a1ba3b}{hwloc_get_obj_below_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
00672                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00673                              \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type2, \textcolor{keywordtype}{unsigned} idx2)
00674 \{
00675   \hyperlink{a00016}{hwloc_obj_t} obj;
00676   obj = \hyperlink{a00047_ga9be4a03488cdd0fb431e4aa1cbdea895}{hwloc_get_obj_by_type} (topology, type1, idx1);
00677   \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00678     \textcolor{keywordflow}{return} NULL;
00679   \textcolor{keywordflow}{return} \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type}(topology, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, type2, idx2);
      
00680 \}
00681 
00700 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
00701 \hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{hwloc_get_obj_below_array_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{int} nr, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} *typev, \textcolor{keywordtype}{unsigned} *idxv) \_\_hwloc\_attribute\_pure;
00702 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l00703}{}\hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{00703} \hyperlink{a00058_gac33a0990f4e771b2117ddedabc3f00f6}{hwloc_get_obj_below_array_by_type} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{int} nr, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} *typev, \textcolor{keywordtype}{unsigned} *idxv)
00704 \{
00705   \hyperlink{a00016}{hwloc_obj_t} obj = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
00706   \textcolor{keywordtype}{int} i;
00707   \textcolor{keywordflow}{for}(i=0; i<nr; i++) \{
00708     \textcolor{keywordflow}{if} (!obj || !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00709       \textcolor{keywordflow}{return} NULL;
00710     obj = \hyperlink{a00054_gaa8dcdb85224f7350b90fb0a1ca91e6d6}{hwloc_get_obj_inside_cpuset_by_type}(topology, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, typev[i], id
      xv[i]);
00711   \}
00712   \textcolor{keywordflow}{return} obj;
00713 \}
00714 
00738 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
00739 \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} *root, \textcolor{keywordtype}{unsigned} n\_roots,
       \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until);
00740 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00741}{}\hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{00741} \hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{hwloc_distribute}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} root, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until)
00742 \{
00743   \textcolor{keywordtype}{unsigned} i;
00744   \textcolor{keywordflow}{if} (!root->\hyperlink{a00016_aac3f6da35c9b57599909a44ce2b716c1}{arity} || n == 1 || root->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} >= until) \{
00745     \textcolor{comment}{/* Got to the bottom, we can't split any more, put everything there.  */}
00746     \textcolor{keywordflow}{for} (i=0; i<n; i++)
00747       cpuset[i] = \hyperlink{a00065_gaaa4ed76211cd3694dfbea2109fc440be}{hwloc_bitmap_dup}(root->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00748     \textcolor{keywordflow}{return};
00749   \}
00750   \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(topology, root->\hyperlink{a00016_a04d05403da37bfe17cd63b7c7dd07b1f}{children}, root->\hyperlink{a00016_aac3f6da35c9b57599909a44ce2b716c1}{arity}, cpuset, n, until);
00751 \}
00752 
00760 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00761}{}\hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{00761} \hyperlink{a00059_gaf057d7c5e3cb3df897ce527258537619}{hwloc_distributev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} *roots, \textcolor{keywordtype}{unsigned} n\_roots
      , \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} until)
00762 \{
00763   \textcolor{keywordtype}{unsigned} i;
00764   \textcolor{keywordtype}{unsigned} tot\_weight;
00765   \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} *cpusetp = \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00766 
00767   tot\_weight = 0;
00768   \textcolor{keywordflow}{for} (i = 0; i < n\_roots; i++)
00769     \textcolor{keywordflow}{if} (roots[i]->cpuset)
00770       tot\_weight += \hyperlink{a00065_ga12d520387be74f849f191d7a06ac325c}{hwloc_bitmap_weight}(roots[i]->cpuset);
00771 
00772   \textcolor{keywordflow}{for} (i = 0; i < n\_roots && tot\_weight; i++) \{
00773     \textcolor{comment}{/* Give to roots[i] a portion proportional to its weight */}
00774     \textcolor{keywordtype}{unsigned} weight = roots[i]->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} ? \hyperlink{a00065_ga12d520387be74f849f191d7a06ac325c}{hwloc_bitmap_weight}(roots[i]->cpuset) : 
      0;
00775     \textcolor{keywordtype}{unsigned} chunk = (n * weight + tot\_weight-1) / tot\_weight;
00776     \hyperlink{a00059_ga6d5c88292ad5aa062c1bebc99369c042}{hwloc_distribute}(topology, roots[i], cpusetp, chunk, until);
00777     cpusetp += chunk;
00778     tot\_weight -= weight;
00779     n -= chunk;
00780   \}
00781 \}
00782 
00789 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void} *
\hypertarget{a00031_source_l00790}{}\hyperlink{a00059_ga3e772fbc4de626ed80f13d332b7d4d03}{00790} \hyperlink{a00059_ga3e772fbc4de626ed80f13d332b7d4d03}{hwloc_alloc_membind_policy_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{size\_t} len, 
      \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset}, \hyperlink{a00050_gac9764f79505775d06407b40f5e4661e8}{hwloc_membind_policy_t} policy, \textcolor{keywordtype}{int} flags)
00791 \{
00792   \textcolor{keywordtype}{void} *p = \hyperlink{a00050_gaeaa00714a9c4319bda0a74ca6f8720e8}{hwloc_alloc_membind_nodeset}(topology, len, nodeset, policy, flags);
00793   \textcolor{keywordflow}{if} (p)
00794     \textcolor{keywordflow}{return} p;
00795   \hyperlink{a00050_ga747962cbb16fd12ad6d126011c734a27}{hwloc_set_membind_nodeset}(topology, nodeset, policy, flags);
00796   p = \hyperlink{a00050_gac5586e58cf25c3596b7d4aa31ce13259}{hwloc_alloc}(topology, len);
00797   \textcolor{keywordflow}{if} (p && policy != \hyperlink{a00050_ggac9764f79505775d06407b40f5e4661e8a979c7aa78dd32780858f30f47a72cca0}{HWLOC_MEMBIND_FIRSTTOUCH})
00798     \textcolor{comment}{/* Enforce the binding by touching the data */}
00799     memset(p, 0, len);
00800   \textcolor{keywordflow}{return} p;
00801 \}
00802 
00807 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void} *
\hypertarget{a00031_source_l00808}{}\hyperlink{a00059_ga6178c6a9ec1dd88ec9f6a9fcdcc7d634}{00808} \hyperlink{a00059_ga6178c6a9ec1dd88ec9f6a9fcdcc7d634}{hwloc_alloc_membind_policy}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{size\_t} len, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00050_gac9764f79505775d06407b40f5e4661e8}{hwloc_membind_policy_t} policy, \textcolor{keywordtype}{int} flags)
00809 \{
00810   \textcolor{keywordtype}{void} *p = \hyperlink{a00050_ga221a7edc5d436300374fa16463f607e5}{hwloc_alloc_membind}(topology, len, cpuset, policy, flags);
00811   \textcolor{keywordflow}{if} (p)
00812     \textcolor{keywordflow}{return} p;
00813   \hyperlink{a00050_ga8b6d1d90227aff8e44ef26bc1f8a8f95}{hwloc_set_membind}(topology, cpuset, policy, flags);
00814   p = \hyperlink{a00050_gac5586e58cf25c3596b7d4aa31ce13259}{hwloc_alloc}(topology, len);
00815   \textcolor{keywordflow}{if} (p && policy != \hyperlink{a00050_ggac9764f79505775d06407b40f5e4661e8a979c7aa78dd32780858f30f47a72cca0}{HWLOC_MEMBIND_FIRSTTOUCH})
00816     \textcolor{comment}{/* Enforce the binding by touching the data */}
00817     memset(p, 0, len);
00818   \textcolor{keywordflow}{return} p;
00819 \}
00820 
00837 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00838 \hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{hwloc_topology_get_complete_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00839 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00840}{}\hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{00840} \hyperlink{a00060_ga418ebb39eaf1eac8f9cf4047cf59a534}{hwloc_topology_get_complete_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00841 \{
00842   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a91788a9da687beb7224cc1fd7b75208c}{complete_cpuset};
00843 \}
00844 
00855 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00856 \hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{hwloc_topology_get_topology_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00857 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00858}{}\hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{00858} \hyperlink{a00060_gaa319133e702fea664750c45735ac8a25}{hwloc_topology_get_topology_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00859 \{
00860   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00861 \}
00862 
00872 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00873 \hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{hwloc_topology_get_online_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pur
      e;
00874 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00875}{}\hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{00875} \hyperlink{a00060_gafeb07985e2cc66aee1da447aff0bcab8}{hwloc_topology_get_online_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00876 \{
00877   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a8842d56c2975380f327ea401c5f53564}{online_cpuset};
00878 \}
00879 
00889 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
00890 \hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{hwloc_topology_get_allowed_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_pu
      re;
00891 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t}
\hypertarget{a00031_source_l00892}{}\hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{00892} \hyperlink{a00060_ga08e3b14e1fe7642b383633d34c1f3c4a}{hwloc_topology_get_allowed_cpuset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00893 \{
00894   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_afa3c59a6dd3da8ffa48710780a1bfb34}{allowed_cpuset};
00895 \}
00896 
00913 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00914 \hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{hwloc_topology_get_complete_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_
      pure;
00915 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00916}{}\hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{00916} \hyperlink{a00061_gaddb7a1f3d71510bb011189e0b8edf29f}{hwloc_topology_get_complete_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00917 \{
00918   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_ac38c4012127525ef74c5615c526f4c2e}{complete_nodeset};
00919 \}
00920 
00931 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00932 \hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{hwloc_topology_get_topology_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_
      pure;
00933 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00934}{}\hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{00934} \hyperlink{a00061_ga78f80a3c04718ca273791a1071512031}{hwloc_topology_get_topology_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00935 \{
00936   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset};
00937 \}
00938 
00948 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
00949 \hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{hwloc_topology_get_allowed_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology) \_\_hwloc\_attribute\_p
      ure;
00950 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t}
\hypertarget{a00031_source_l00951}{}\hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{00951} \hyperlink{a00061_ga13915b8e074f59fbdf8f973739509293}{hwloc_topology_get_allowed_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology)
00952 \{
00953   \textcolor{keywordflow}{return} \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology)->\hyperlink{a00016_a19e3d0a5951a7510fc4fc4722a9bf531}{allowed_nodeset};
00954 \}
00955 
00986 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l00987}{}\hyperlink{a00062_ga60ecc4ae480c28b5fbd34aca4fc37daa}{00987} \hyperlink{a00062_ga60ecc4ae480c28b5fbd34aca4fc37daa}{hwloc_cpuset_to_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, 
      \hyperlink{a00040_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
00988 \{
00989         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
00990         \hyperlink{a00016}{hwloc_obj_t} obj;
00991 
00992         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN}) \{
00993                  \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(cpuset))
00994                         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
00995                 \textcolor{keywordflow}{else}
00996                         \textcolor{comment}{/* Assume the whole system */}
00997                         \hyperlink{a00065_ga52456f7ef79d68e610cb65e3f7ffafad}{hwloc_bitmap_fill}(nodeset);
00998                 \textcolor{keywordflow}{return};
00999         \}
01000 
01001         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
01002         obj = NULL;
01003         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, cpuse
      t, depth, obj)) != NULL)
01004                 \hyperlink{a00065_ga497556af0cc34f109ae0277999c074d3}{hwloc_bitmap_set}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index});
01005 \}
01006 
01014 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01015}{}\hyperlink{a00062_ga9162785e39d7c697f76f99524c4a2fb4}{01015} \hyperlink{a00062_ga9162785e39d7c697f76f99524c4a2fb4}{hwloc_cpuset_to_nodeset_strict}(\textcolor{keyword}{struct} hwloc\_topology *topology, 
      \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc_const_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00040_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01016 \{
01017         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01018         \hyperlink{a00016}{hwloc_obj_t} obj;
01019         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} )
01020                 \textcolor{keywordflow}{return};
01021         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(nodeset);
01022         obj = NULL;
01023         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00056_ga2f9a4ec15e9cfae8c21501257a51ce5b}{hwloc_get_next_obj_covering_cpuset_by_depth}(topology, cpuse
      t, depth, obj)) != NULL)
01024                 \hyperlink{a00065_ga497556af0cc34f109ae0277999c074d3}{hwloc_bitmap_set}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index});
01025 \}
01026 
01035 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01036}{}\hyperlink{a00062_gaa677fd588304b5615de4ea78104adfb5}{01036} \hyperlink{a00062_gaa677fd588304b5615de4ea78104adfb5}{hwloc_cpuset_from_nodeset}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, 
      \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01037 \{
01038         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01039         \hyperlink{a00016}{hwloc_obj_t} obj;
01040 
01041         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} ) \{
01042                 \textcolor{keywordflow}{if} (\hyperlink{a00065_gaa94fed35d2a598bc4a8657b6955b7bf5}{hwloc_bitmap_iszero}(nodeset))
01043                         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01044                 \textcolor{keywordflow}{else}
01045                         \textcolor{comment}{/* Assume the whole system */}
01046                         \hyperlink{a00065_ga52456f7ef79d68e610cb65e3f7ffafad}{hwloc_bitmap_fill}(cpuset);
01047                 \textcolor{keywordflow}{return};
01048         \}
01049 
01050         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01051         obj = NULL;
01052         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, obj)) != NULL)
       \{
01053                 \textcolor{keywordflow}{if} (\hyperlink{a00065_ga2583f44cbdb5fff2ea40efdcf3975d3f}{hwloc_bitmap_isset}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index}))
01054                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels
       always have a cpuset */}
01055                         \hyperlink{a00065_ga1ba1de709ee9a7cf5cc8ad2d9a1a81d4}{hwloc_bitmap_or}(cpuset, cpuset, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01056         \}
01057 \}
01058 
01066 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{void}
\hypertarget{a00031_source_l01067}{}\hyperlink{a00062_gaa7c3f39802b00a758c58e024a8119979}{01067} \hyperlink{a00062_gaa7c3f39802b00a758c58e024a8119979}{hwloc_cpuset_from_nodeset_strict}(\textcolor{keyword}{struct} hwloc\_topology *topology, \hyperlink{a00040_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc_cpuset_t} 
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \hyperlink{a00040_ga2f5276235841ad66a79bedad16a5a10c}{hwloc_const_nodeset_t} \hyperlink{a00016_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01068 \{
01069         \textcolor{keywordtype}{int} \hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55aaf0964881117bdedf1a5e9332cd120dd}{HWLOC_OBJ_NODE});
01070         \hyperlink{a00016}{hwloc_obj_t} obj;
01071         \textcolor{keywordflow}{if} (depth == \hyperlink{a00046_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC_TYPE_DEPTH_UNKNOWN} )
01072                 \textcolor{keywordflow}{return};
01073         \hyperlink{a00065_ga6c540b9fe63b8223b6aba46d56dd63b8}{hwloc_bitmap_zero}(cpuset);
01074         obj = NULL;
01075         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00053_gab7c1dce3f42ece5bfa621e87cf332418}{hwloc_get_next_obj_by_depth}(topology, depth, obj)) != NULL)
      
01076                 \textcolor{keywordflow}{if} (\hyperlink{a00065_ga2583f44cbdb5fff2ea40efdcf3975d3f}{hwloc_bitmap_isset}(nodeset, obj->\hyperlink{a00016_a61a7a80a68eaccbaaa28269e678c81a9}{os_index}))
01077                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels
       always have a cpuset */}
01078                         \hyperlink{a00065_ga1ba1de709ee9a7cf5cc8ad2d9a1a81d4}{hwloc_bitmap_or}(cpuset, cpuset, obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01079 \}
01080 
01108 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01109}{}\hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{01109} \hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{hwloc_get_whole_distance_matrix_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keywordtype}{unsigned} dept
      h)
01110 \{
01111   \hyperlink{a00016}{hwloc_obj_t} root = \hyperlink{a00053_gadbf58f6e187efbdb3cd9a8e30311b7d7}{hwloc_get_root_obj}(topology);
01112   \textcolor{keywordtype}{unsigned} i;
01113   \textcolor{keywordflow}{for}(i=0; i<root->\hyperlink{a00016_a8be6f63eca4da91000c832280db927b7}{distances_count}; i++)
01114     \textcolor{keywordflow}{if} (root->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a6fe066eaf62ee448aa05bab8e7217ff7}{relative_depth} == depth)
01115       \textcolor{keywordflow}{return} root->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i];
01116   \textcolor{keywordflow}{return} NULL;
01117 \}
01118 
01138 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01139}{}\hyperlink{a00063_ga9979237728f7a00a38836e15a8e8cd17}{01139} \hyperlink{a00063_ga9979237728f7a00a38836e15a8e8cd17}{hwloc_get_whole_distance_matrix_by_type}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, 
      \hyperlink{a00041_gacd37bb612667dc437d66bfb175a8dc55}{hwloc_obj_type_t} type)
01140 \{
01141   \textcolor{keywordtype}{int} depth = \hyperlink{a00046_gaea7c64dd59467f5201ba87712710b14d}{hwloc_get_type_depth}(topology, type);
01142   \textcolor{keywordflow}{if} (depth < 0)
01143     \textcolor{keywordflow}{return} NULL;
01144   \textcolor{keywordflow}{return} \hyperlink{a00063_ga48dfec8b8ba1fb8f2073ecd0728f0ca6}{hwloc_get_whole_distance_matrix_by_depth}(topology, depth);
01145 \}
01146 
01160 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} *
\hypertarget{a00031_source_l01161}{}\hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{01161} \hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{hwloc_get_distance_matrix_covering_obj_by_depth}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01162                                                 \hyperlink{a00016}{hwloc_obj_t} obj, \textcolor{keywordtype}{unsigned} depth,
01163                                                 \textcolor{keywordtype}{unsigned} *firstp)
01164 \{
01165   \textcolor{keywordflow}{while} (obj && obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01166     \textcolor{keywordtype}{unsigned} i;
01167     \textcolor{keywordflow}{for}(i=0; i<obj->\hyperlink{a00016_a8be6f63eca4da91000c832280db927b7}{distances_count}; i++)
01168       \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a6fe066eaf62ee448aa05bab8e7217ff7}{relative_depth} == depth - obj->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
01169         \textcolor{keywordflow}{if} (!obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i]->\hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs})
01170           \textcolor{keywordflow}{continue};
01171         *firstp = \hyperlink{a00054_ga8af256c2572f16520f95440b884c1bd6}{hwloc_get_next_obj_inside_cpuset_by_depth}(topology, obj->
      \hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, depth, NULL)->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index};
01172         \textcolor{keywordflow}{return} obj->\hyperlink{a00016_a9a5dd75596edc48fe834f81988cdc0d6}{distances}[i];
01173       \}
01174     obj = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
01175   \}
01176   \textcolor{keywordflow}{return} NULL;
01177 \}
01178 
01190 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l01191}{}\hyperlink{a00063_ga9addde99e34b815df47625f1d6191839}{01191} \hyperlink{a00063_ga9addde99e34b815df47625f1d6191839}{hwloc_get_latency}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01192                    \hyperlink{a00016}{hwloc_obj_t} obj1, \hyperlink{a00016}{hwloc_obj_t} obj2,
01193                    \textcolor{keywordtype}{float} *\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency}, \textcolor{keywordtype}{float} *reverse\_latency)
01194 \{
01195   \hyperlink{a00016}{hwloc_obj_t} ancestor;
01196   \textcolor{keyword}{const} \textcolor{keyword}{struct }\hyperlink{a00014}{hwloc_distances_s} * distances;
01197   \textcolor{keywordtype}{unsigned} first\_logical ;
01198 
01199   \textcolor{keywordflow}{if} (obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth} != obj2->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}) \{
01200     errno = EINVAL;
01201     \textcolor{keywordflow}{return} -1;
01202   \}
01203 
01204   ancestor = \hyperlink{a00053_ga52a334f17c6b5b409d5cc6bb4ab8a2ab}{hwloc_get_common_ancestor_obj}(topology, obj1, obj2);
01205   distances = \hyperlink{a00063_ga186ac2711b98a12cf46d58cd005fbb51}{hwloc_get_distance_matrix_covering_obj_by_depth}(topology, ancestor,
       obj1->\hyperlink{a00016_a9d82690370275d42d652eccdea5d3ee5}{depth}, &first\_logical);
01206   \textcolor{keywordflow}{if} (distances && distances->\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency}) \{
01207     \textcolor{keyword}{const} \textcolor{keywordtype}{float} * latency\_matrix = distances->\hyperlink{a00014_a0f70f48d1bfb18e5e2008825da2967c9}{latency};
01208     \textcolor{keywordtype}{unsigned} \hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs} = distances->\hyperlink{a00014_a4ca2af858cebbce7324ec49903d09474}{nbobjs};
01209     \textcolor{keywordtype}{unsigned} l1 = obj1->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index} - first\_logical;
01210     \textcolor{keywordtype}{unsigned} l2 = obj2->\hyperlink{a00016_a0d07fb7b8935e137c94d75a3eb492ae9}{logical_index} - first\_logical;
01211     *latency = latency\_matrix[l1*nbobjs+l2];
01212     *reverse\_latency = latency\_matrix[l2*nbobjs+l1];
01213     \textcolor{keywordflow}{return} 0;
01214   \}
01215 
01216   errno = ENOSYS;
01217   \textcolor{keywordflow}{return} -1;
01218 \}
01219 
01234 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01235}{}\hyperlink{a00064_ga3603275746a8792e54415d79763aa9e9}{01235} \hyperlink{a00064_ga3603275746a8792e54415d79763aa9e9}{hwloc_get_non_io_ancestor_obj}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology \_\_hwloc\_attribute\_unused,
      
01236                               \hyperlink{a00016}{hwloc_obj_t} ioobj)
01237 \{
01238   \hyperlink{a00016}{hwloc_obj_t} obj = ioobj;
01239   \textcolor{keywordflow}{while} (obj && !obj->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01240     obj = obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent};
01241   \}
01242   \textcolor{keywordflow}{return} obj;
01243 \}
01244 
01249 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01250}{}\hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{01250} \hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{hwloc_get_next_pcidev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01251 \{
01252   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a5d8117a54df1fbd3606ab19e42cb0ea9}{HWLOC_OBJ_PCI_DEVICE}, prev);
01253 \}
01254 
01258 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01259}{}\hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{01259} \hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{hwloc_get_pcidev_by_busid}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01260                           \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus, \textcolor{keywordtype}{unsigned} dev, \textcolor{keywordtype}{unsigned} f
      unc)
01261 \{
01262   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
01263   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00064_gad6e1ed122ef3b6e098538d75acd5e3f6}{hwloc_get_next_pcidev}(topology, obj)) != NULL) \{
01264     \textcolor{keywordflow}{if} (obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a8fba44988deb98613c1505a4019a34dc}{domain} == domain
01265         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_aae99e035e8d1387d7b8768aaa8eceb0a}{bus} == bus
01266         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a3d70c84a12f7e93d14c8d47bf4fd9dc5}{dev} == dev
01267         && obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00022_a695f32df53f4ef728670bfcf31b74e0f}{func} == func)
01268       \textcolor{keywordflow}{return} obj;
01269   \}
01270   \textcolor{keywordflow}{return} NULL;
01271 \}
01272 
01276 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01277}{}\hyperlink{a00064_ga9d5643f2e337fe1b98e7cce5c1ecb74e}{01277} \hyperlink{a00064_ga9d5643f2e337fe1b98e7cce5c1ecb74e}{hwloc_get_pcidev_by_busidstring}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *busid)
01278 \{
01279   \textcolor{keywordtype}{unsigned} domain = 0; \textcolor{comment}{/* default */}
01280   \textcolor{keywordtype}{unsigned} bus, dev, func;
01281 
01282   \textcolor{keywordflow}{if} (sscanf(busid, \textcolor{stringliteral}{"%x:%x.%x"}, &bus, &dev, &func) != 3
01283       && sscanf(busid, \textcolor{stringliteral}{"%x:%x:%x.%x"}, &domain, &bus, &dev, &func) != 4) \{
01284     errno = EINVAL;
01285     \textcolor{keywordflow}{return} NULL;
01286   \}
01287 
01288   \textcolor{keywordflow}{return} \hyperlink{a00064_ga546e1d690c63fb24177f3013ed78ceb1}{hwloc_get_pcidev_by_busid}(topology, domain, bus, dev, func);
01289 \}
01290 
01295 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01296}{}\hyperlink{a00064_ga73a5bc6265642e6001f7a10812ab886d}{01296} \hyperlink{a00064_ga73a5bc6265642e6001f7a10812ab886d}{hwloc_get_next_osdev}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01297 \{
01298   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a51e7280240fd9f25589cbbe538bdb075}{HWLOC_OBJ_OS_DEVICE}, prev);
01299 \}
01300 
01305 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01306}{}\hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{01306} \hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{hwloc_get_next_bridge}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \hyperlink{a00016}{hwloc_obj_t} prev)
01307 \{
01308   \textcolor{keywordflow}{return} \hyperlink{a00053_ga5f08ceb69375341e73563cfe2e77534e}{hwloc_get_next_obj_by_type}(topology, \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE}, prev);
01309 \}
01310 
01311 \textcolor{comment}{/* \(\backslash\)brief Checks whether a given bridge covers a given PCI bus.}
01312 \textcolor{comment}{ */}
01313 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\hypertarget{a00031_source_l01314}{}\hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{01314} \hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{hwloc_bridge_covers_pcibus}(\hyperlink{a00016}{hwloc_obj_t} bridge,
01315                            \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01316 \{
01317   \textcolor{keywordflow}{return} bridge->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE}
01318     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_ac6a169b672d0e9f75756fd5665828b93}{downstream_type} == \hyperlink{a00041_gga48a4803c72574191d7ead1c62aaf9860a8f3b4cecf3dab6073d74696d10863c60}{HWLOC_OBJ_BRIDGE_PCI}
01319     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.domain == domain
01320     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.secondary\_bus <= bus
01321     && bridge->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00012_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.subordinate\_bus >= bus;
01322 \}
01323 
01329 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00016}{hwloc_obj_t}
\hypertarget{a00031_source_l01330}{}\hyperlink{a00064_ga81d4f68afbd68d94eb70d4f5c603eff5}{01330} \hyperlink{a00064_ga81d4f68afbd68d94eb70d4f5c603eff5}{hwloc_get_hostbridge_by_pcibus}(\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology,
01331                                \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01332 \{
01333   \hyperlink{a00016}{hwloc_obj_t} obj = NULL;
01334   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00064_ga2bd3f856d0fc3c6c02642c17d763b823}{hwloc_get_next_bridge}(topology, obj)) != NULL) \{
01335     \textcolor{keywordflow}{if} (\hyperlink{a00064_gaef22d6bf5cb0b7f13a863780126a8cb7}{hwloc_bridge_covers_pcibus}(obj, domain, bus)) \{
01336       \textcolor{comment}{/* found bridge covering this pcibus, make sure it's a hostbridge */}
01337       assert(obj->\hyperlink{a00016_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00017_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00012_a265dd2164aa2df4972e25a029da72125}{upstream_type} == \hyperlink{a00041_gga48a4803c72574191d7ead1c62aaf9860a2c7660f3864ad2810c1e72aad285e574}{HWLOC_OBJ_BRIDGE_HOST});
01338       assert(obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent}->\hyperlink{a00016_acc4f0803f244867e68fe0036800be5de}{type} != \hyperlink{a00041_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC_OBJ_BRIDGE});
01339       assert(obj->\hyperlink{a00016_adc494f6aed939992be1c55cca5822900}{parent}->\hyperlink{a00016_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
01340       \textcolor{keywordflow}{return} obj;
01341     \}
01342   \}
01343   \textcolor{keywordflow}{return} NULL;
01344 \}
01345 
01346 \textcolor{preprocessor}{#ifdef HWLOC\_HAVE\_GL}
01347 \textcolor{preprocessor}{}
01354 HWLOC\_DECLSPEC \hyperlink{a00065_gaa3c2bf4c776d603dcebbb61b0c923d84}{hwloc_bitmap_t} get\_pci\_cpuset(\textcolor{keyword}{const} \hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc_topology_t} topology, \textcolor{keyword}{con
      st} pci\_dev\_info pci\_info);
01355 \textcolor{preprocessor}{#endif}
01356 \textcolor{preprocessor}{}
01361 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
01362 \textcolor{preprocessor}{}\} \textcolor{comment}{/* extern "C" */}
01363 \textcolor{preprocessor}{#endif}
01364 \textcolor{preprocessor}{}
01365 
01366 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HWLOC\_HELPER\_H */}
\end{DoxyCode}
