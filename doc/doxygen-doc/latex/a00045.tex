\hypertarget{a00045}{
\section{Tinker With Topologies.}
\label{a00045}\index{Tinker With Topologies.@{Tinker With Topologies.}}
}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{a00045_ga9d80f08eb25b7ac22f1b998dc8bf521f}{hwloc\_\-restrict\_\-flags\_\-e} \{ \hyperlink{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521fa4d18407f5520793b50b9e892f5bb55d1}{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-DISTANCES}, 
\hyperlink{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521fa699969227a09bbc1a7de51dc9fb7be4b}{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-MISC}, 
\hyperlink{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521faa95d6985e36ec1e55f68b210297a85cb}{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-IO}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
 int \hyperlink{a00045_ga45578d725c66865cfef31d0585dcff70}{hwloc\_\-topology\_\-export\_\-xml} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, const char $\ast$xmlpath)
\item 
 int \hyperlink{a00045_ga739330e9402425315e44e5012631fb91}{hwloc\_\-topology\_\-export\_\-xmlbuffer} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, char $\ast$$\ast$xmlbuffer, int $\ast$buflen)
\item 
 void \hyperlink{a00045_ga5e375acef034bebc1f20ead884697301}{hwloc\_\-free\_\-xmlbuffer} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, char $\ast$xmlbuffer)
\item 
 \hyperlink{a00016}{hwloc\_\-obj\_\-t} \hyperlink{a00045_ga017a9ba16d554326c6e3812d545d7230}{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_\-const\_\-cpuset\_\-t} cpuset, const char $\ast$name)
\item 
 \hyperlink{a00016}{hwloc\_\-obj\_\-t} \hyperlink{a00045_gadacd7a3d21220fbb30c3256d8b22a294}{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} topology, \hyperlink{a00016}{hwloc\_\-obj\_\-t} parent, const char $\ast$name)
\item 
 int \hyperlink{a00045_gad75fa918e3eb54663bdeab25ed89b648}{hwloc\_\-topology\_\-restrict} (\hyperlink{a00039_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_\-topology\_\-t} restrict topology, \hyperlink{a00040_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_\-const\_\-cpuset\_\-t} cpuset, unsigned long flags)
\end{DoxyCompactItemize}


\subsection{Enumeration Type Documentation}
\hypertarget{a00045_ga9d80f08eb25b7ac22f1b998dc8bf521f}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-restrict\_\-flags\_\-e@{hwloc\_\-restrict\_\-flags\_\-e}}
\index{hwloc\_\-restrict\_\-flags\_\-e@{hwloc\_\-restrict\_\-flags\_\-e}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-restrict\_\-flags\_\-e}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf hwloc\_\-restrict\_\-flags\_\-e}}}
\label{a00045_ga9d80f08eb25b7ac22f1b998dc8bf521f}


Flags to be given to \hyperlink{a00045_gad75fa918e3eb54663bdeab25ed89b648}{hwloc\_\-topology\_\-restrict()}. 

\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-DISTANCES@{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-DISTANCES}!hwlocality\_\-tinker@{hwlocality\_\-tinker}}\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-DISTANCES@{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-DISTANCES}}\item[{\em 
\hypertarget{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521fa4d18407f5520793b50b9e892f5bb55d1}{
HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-DISTANCES}
\label{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521fa4d18407f5520793b50b9e892f5bb55d1}
}]Adapt distance matrices according to objects being removed during restriction. If this flag is not set, distance matrices are removed. \index{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-MISC@{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-MISC}!hwlocality\_\-tinker@{hwlocality\_\-tinker}}\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-MISC@{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-MISC}}\item[{\em 
\hypertarget{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521fa699969227a09bbc1a7de51dc9fb7be4b}{
HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-MISC}
\label{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521fa699969227a09bbc1a7de51dc9fb7be4b}
}]Move Misc objects to ancestors if their parents are removed during restriction. If this flag is not set, Misc objects are removed when their parents are removed. \index{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-IO@{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-IO}!hwlocality\_\-tinker@{hwlocality\_\-tinker}}\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-IO@{HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-IO}}\item[{\em 
\hypertarget{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521faa95d6985e36ec1e55f68b210297a85cb}{
HWLOC\_\-RESTRICT\_\-FLAG\_\-ADAPT\_\-IO}
\label{a00045_gga9d80f08eb25b7ac22f1b998dc8bf521faa95d6985e36ec1e55f68b210297a85cb}
}]Move I/O objects to ancestors if their parents are removed during restriction. If this flag is not set, I/O devices and bridges are removed when their parents are removed. \end{description}
\end{Desc}



\subsection{Function Documentation}
\hypertarget{a00045_ga5e375acef034bebc1f20ead884697301}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-free\_\-xmlbuffer@{hwloc\_\-free\_\-xmlbuffer}}
\index{hwloc\_\-free\_\-xmlbuffer@{hwloc\_\-free\_\-xmlbuffer}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-free\_\-xmlbuffer}]{\setlength{\rightskip}{0pt plus 5cm} void hwloc\_\-free\_\-xmlbuffer (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{char $\ast$}]{xmlbuffer}
\end{DoxyParamCaption}
)}}
\label{a00045_ga5e375acef034bebc1f20ead884697301}


Free a buffer allocated by \hyperlink{a00045_ga739330e9402425315e44e5012631fb91}{hwloc\_\-topology\_\-export\_\-xmlbuffer()} 

\hypertarget{a00045_ga45578d725c66865cfef31d0585dcff70}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-topology\_\-export\_\-xml@{hwloc\_\-topology\_\-export\_\-xml}}
\index{hwloc\_\-topology\_\-export\_\-xml@{hwloc\_\-topology\_\-export\_\-xml}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-topology\_\-export\_\-xml}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-export\_\-xml (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{const char $\ast$}]{xmlpath}
\end{DoxyParamCaption}
)}}
\label{a00045_ga45578d725c66865cfef31d0585dcff70}


Export the topology into an XML file. 

This file may be loaded later through \hyperlink{a00044_ga93efcc8a962afe1ed23393700682173f}{hwloc\_\-topology\_\-set\_\-xml()}.

\begin{DoxyReturn}{Returns}
-\/1 if a failure occured. 
\end{DoxyReturn}
\hypertarget{a00045_ga739330e9402425315e44e5012631fb91}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-topology\_\-export\_\-xmlbuffer@{hwloc\_\-topology\_\-export\_\-xmlbuffer}}
\index{hwloc\_\-topology\_\-export\_\-xmlbuffer@{hwloc\_\-topology\_\-export\_\-xmlbuffer}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-topology\_\-export\_\-xmlbuffer}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-export\_\-xmlbuffer (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{char $\ast$$\ast$}]{xmlbuffer, }
\item[{int $\ast$}]{buflen}
\end{DoxyParamCaption}
)}}
\label{a00045_ga739330e9402425315e44e5012631fb91}


Export the topology into a newly-\/allocated XML memory buffer. 

{\ttfamily xmlbuffer} is allocated by the callee and should be freed with \hyperlink{a00045_ga5e375acef034bebc1f20ead884697301}{hwloc\_\-free\_\-xmlbuffer()} later in the caller.

This memory buffer may be loaded later through \hyperlink{a00044_gae7e4bade144652a2b48f5eaf0309b4ec}{hwloc\_\-topology\_\-set\_\-xmlbuffer()}.

\begin{DoxyReturn}{Returns}
-\/1 if a failure occured. 
\end{DoxyReturn}
\hypertarget{a00045_ga017a9ba16d554326c6e3812d545d7230}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset@{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset}}
\index{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset@{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset}]{\setlength{\rightskip}{0pt plus 5cm} {\bf hwloc\_\-obj\_\-t} hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-cpuset (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{{\bf hwloc\_\-const\_\-cpuset\_\-t}}]{cpuset, }
\item[{const char $\ast$}]{name}
\end{DoxyParamCaption}
)}}
\label{a00045_ga017a9ba16d554326c6e3812d545d7230}


Add a MISC object to the topology. 

A new MISC object will be created and inserted into the topology at the position given by bitmap {\ttfamily cpuset}. This offers a way to add new intermediate levels to the topology hierarchy.

{\ttfamily cpuset} and {\ttfamily name} will be copied to setup the new object attributes.

\begin{DoxyReturn}{Returns}
the newly-\/created object. 

{\ttfamily NULL} if the insertion conflicts with the existing topology tree. 
\end{DoxyReturn}
\hypertarget{a00045_gadacd7a3d21220fbb30c3256d8b22a294}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent@{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent}}
\index{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent@{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent}]{\setlength{\rightskip}{0pt plus 5cm} {\bf hwloc\_\-obj\_\-t} hwloc\_\-topology\_\-insert\_\-misc\_\-object\_\-by\_\-parent (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t}}]{topology, }
\item[{{\bf hwloc\_\-obj\_\-t}}]{parent, }
\item[{const char $\ast$}]{name}
\end{DoxyParamCaption}
)}}
\label{a00045_gadacd7a3d21220fbb30c3256d8b22a294}


Add a MISC object as a leaf of the topology. 

A new MISC object will be created and inserted into the topology at the position given by parent. It is appended to the list of existing children, without ever adding any intermediate hierarchy level. This is useful for annotating the topology without actually changing the hierarchy.

{\ttfamily name} will be copied to the setup the new object attributes. However, the new leaf object will not have any {\ttfamily cpuset}.

\begin{DoxyReturn}{Returns}
the newly-\/created object 
\end{DoxyReturn}
\hypertarget{a00045_gad75fa918e3eb54663bdeab25ed89b648}{
\index{hwlocality\_\-tinker@{hwlocality\_\-tinker}!hwloc\_\-topology\_\-restrict@{hwloc\_\-topology\_\-restrict}}
\index{hwloc\_\-topology\_\-restrict@{hwloc\_\-topology\_\-restrict}!hwlocality_tinker@{hwlocality\_\-tinker}}
\subsubsection[{hwloc\_\-topology\_\-restrict}]{\setlength{\rightskip}{0pt plus 5cm} int hwloc\_\-topology\_\-restrict (
\begin{DoxyParamCaption}
\item[{{\bf hwloc\_\-topology\_\-t} restrict}]{topology, }
\item[{{\bf hwloc\_\-const\_\-cpuset\_\-t}}]{cpuset, }
\item[{unsigned long}]{flags}
\end{DoxyParamCaption}
)}}
\label{a00045_gad75fa918e3eb54663bdeab25ed89b648}


Restrict the topology to the given CPU set. 

Topology {\ttfamily topology} is modified so as to remove all objects that are not included (or partially included) in the CPU set {\ttfamily cpuset}. All objects CPU and node sets are restricted accordingly.

{\ttfamily flags} is a OR'ed set of \hyperlink{a00045_ga9d80f08eb25b7ac22f1b998dc8bf521f}{hwloc\_\-restrict\_\-flags\_\-e}.

\begin{DoxyNote}{Note}
This call may not be reverted by restricting back to a larger cpuset. Once dropped during restriction, objects may not be brought back, except by reloading the entire topology with \hyperlink{a00043_ga91e2e6427b95fb7339c99dbbef996e71}{hwloc\_\-topology\_\-load()}. 
\end{DoxyNote}
